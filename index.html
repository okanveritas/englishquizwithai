<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CEFR İngilizce Seviye Tespit Sınavı - 60 Soru</title>
    <meta name="description" content="60 soruluk kapsamlı CEFR seviye belirleme testi. A1'den C2'ye kadar İngilizce yeterliliğinizi ölçün. Grammar, Vocabulary, Reading ve Cloze test kategorileri.">
    <meta name="keywords" content="CEFR test, İngilizce seviye testi, CEFR level test, English proficiency test, seviye belirleme, A1 A2 B1 B2 C1 C2">
    <meta name="author" content="Okan Yaldız">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="">
    <meta property="og:title" content="CEFR İngilizce Seviye Tespit Sınavı">
    <meta property="og:description" content="60 soruluk kapsamlı CEFR seviye belirleme testi. A1'den C2'ye kadar İngilizce yeterliliğinizi ölçün."
    <meta property="og:image" content="">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="">
    <meta property="twitter:title" content="CEFR İngilizce Seviye Tespit Sınavı">
    <meta property="twitter:description" content="60 soruluk kapsamlı CEFR seviye belirleme testi. A1'den C2'ye kadar İngilizce yeterliliğinizi ölçün."
    <meta property="twitter:image" content="">
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjMyIiBoZWlnaHQ9IjMyIiByeD0iOCIgZmlsbD0iIzI1NjNlYiIvPgo8dGV4dCB4PSIxNiIgeT0iMjIiIGZvbnQtZmFtaWx5PSJBcmlhbCIgZm9udC1zaXplPSIxOCIgZm9udC13ZWlnaHQ9ImJvbGQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5RPC90ZXh0Pgo8L3N2Zz4=">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <style>
/* Clean Reset Theme */
:root {
  --primary: #3b82f6;
  --success: #10b981;
  --danger: #ef4444;
  --warning: #f59e0b;
  --text: #1f2937;
  --text-light: #4b5563;
  --text-muted: #6b7280;
  --bg: #ffffff;
  --bg-light: #f9fafb;
  --bg-card: #ffffff;
  --border: #e5e7eb;
  --border-light: #f3f4f6;
  --radius: 8px;
  --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.1);
}

.dark-theme {
  --text: #f9fafb;
  --text-light: #d1d5db;
  --text-muted: #9ca3af;
  --bg: #111827;
  --bg-light: #1f2937;
  --bg-card: #1f2937;
  --border: #374151;
  --border-light: #4b5563;
  --shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.5);
  --shadow-lg: 0 10px 15px -3px rgba(0, 0, 0, 0.4);
}

/* Base Styles */
* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
  line-height: 1.6;
  color: var(--text);
  background: linear-gradient(to bottom, var(--bg) 0%, var(--bg-light) 100%);
  margin: 0;
  padding: 0;
  min-height: 100vh;
  transition: background 0.3s ease, color 0.3s ease;
}

body.dark-theme {
  background: linear-gradient(to bottom, var(--bg) 0%, var(--bg-light) 100%);
}

/* Theme Toggle */
.theme-toggle {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 50%;
  width: 44px;
  height: 44px;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  box-shadow: var(--shadow);
  font-size: 18px;
}

.theme-toggle:hover {
  transform: scale(1.1);
}

.light-theme .moon-icon { display: none; }
.dark-theme .sun-icon { display: none; }

/* Layout */
.app-container {
  min-height: 100vh;
  background: var(--bg-light);
}

.app-header {
  background: var(--bg);
  border-bottom: 1px solid var(--border);
  position: sticky;
  top: 0;
  z-index: 100;
}

.header-content {
  max-width: 1200px;
  margin: 0 auto;
  padding: 1rem 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.logo {
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.logo-icon {
  font-size: 24px;
}

.logo h1 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text);
}

.header-info {
  display: flex;
  align-items: center;
  gap: 1rem;
}

.mode-indicator {
  font-size: 0.875rem;
  color: var(--text-light);
  padding: 0.5rem 1rem;
  background: var(--bg-light);
  border-radius: var(--radius);
  border: 1px solid var(--border);
}

.reset-btn {
  background: none;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 0.5rem;
  color: var(--text-light);
  cursor: pointer;
  display: flex;
  align-items: center;
  justify-content: center;
}

.reset-btn:hover {
  color: var(--text);
  background: var(--bg-light);
}

/* Sections */
.container {
  max-width: 1000px;
  margin: 0 auto;
  padding: 2rem;
}

.home-section .container {
  padding: 0;
  max-width: 100%;
}

.hero-content {
  max-width: 800px;
  margin: 0 auto;
  padding: 0 2rem;
}

.section {
  display: none;
}

.section.active {
  display: block !important;
}

/* Section Headers - Enhanced Style */
.section-header {
  text-align: center;
  padding: 4rem 2rem 5rem 2rem;
  background: linear-gradient(135deg, #3b82f6 0%, #6366f1 50%, #8b5cf6 100%);
  color: white;
  margin: 0 -2rem 2rem -2rem;
  position: relative;
  overflow: hidden;
  border-radius: 0 0 40px 40px;
}

.section-header::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
  animation: shimmer 3s infinite;
}

.section-header::after {
  content: '';
  position: absolute;
  bottom: -2px;
  left: 0;
  right: 0;
  height: 120px;
  background: linear-gradient(180deg, 
    rgba(99,102,241,0.8) 0%, 
    rgba(99,102,241,0.4) 30%, 
    rgba(99,102,241,0.15) 60%, 
    rgba(99,102,241,0.05) 80%, 
    transparent 100%);
  z-index: 1;
  filter: blur(1px);
}

@keyframes shimmer {
  0% { left: -100%; }
  100% { left: 100%; }
}

.section-title {
  font-size: 3rem;
  font-weight: 800;
  margin-bottom: 1rem;
  text-shadow: 0 2px 4px rgba(0,0,0,0.3);
  position: relative;
  z-index: 2;
}

.section-subtitle {
  font-size: 1.2rem;
  opacity: 0.95;
  max-width: 700px;
  margin: 0 auto;
  text-shadow: 0 1px 2px rgba(0,0,0,0.2);
  position: relative;
  z-index: 2;
}

.section-icon {
  font-size: 5rem;
  margin-bottom: 1.5rem;
  opacity: 0.95;
  display: inline-block;
  animation: float 3s ease-in-out infinite;
  position: relative;
  z-index: 2;
}

@keyframes float {
  0%, 100% { transform: translateY(0px); }
  50% { transform: translateY(-10px); }
}

/* Enhanced Cards */
.upload-card, .section-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 16px;
  padding: 2.5rem;
  box-shadow: var(--shadow);
  margin-bottom: 2rem;
  position: relative;
  z-index: 2;
  transition: all 0.3s ease;
}

.upload-card:hover, .section-card:hover {
  transform: translateY(-4px);
  box-shadow: var(--shadow-lg);
  border-color: var(--primary);
}

/* Dark theme card enhancements */
.dark-theme .upload-card, 
.dark-theme .section-card,
.dark-theme .quiz-card,
.dark-theme .flashcard-input {
  background: var(--bg-card);
  border-color: var(--border);
  box-shadow: var(--shadow);
}

.upload-card::before, .section-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  height: 2px;
  background: linear-gradient(90deg, transparent, var(--primary), transparent);
  border-radius: 16px 16px 0 0;
}

/* Form Styles */
.input-label {
  display: block;
  font-weight: 500;
  color: var(--text);
  margin-bottom: 0.5rem;
  font-size: 0.9rem;
}

.required {
  color: var(--danger);
}

.textarea-container {
  position: relative;
  margin-bottom: 1rem;
}

.json-textarea {
  width: 100%;
  min-height: 200px;
  padding: 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  font-family: monospace;
  font-size: 0.875rem;
  background: var(--bg-light);
  color: var(--text);
  resize: vertical;
}

.json-textarea:focus {
  outline: none;
  border-color: var(--primary);
}

.textarea-indicator {
  position: absolute;
  bottom: 0.5rem;
  right: 1rem;
  font-size: 0.75rem;
  color: var(--text-light);
  background: var(--bg);
  padding: 0.25rem 0.5rem;
  border-radius: 4px;
  border: 1px solid var(--border);
}

/* Validation Result */
.validation-result {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 1rem;
  border-radius: var(--radius);
  margin-bottom: 1rem;
  background: #f0f9ff;
  border: 1px solid var(--success);
  color: var(--success);
}

.validation-result.error {
  background: #fef2f2;
  border-color: var(--danger);
  color: var(--danger);
}

.dark-theme .validation-result {
  background: rgba(5, 150, 105, 0.1);
}

.dark-theme .validation-result.error {
  background: rgba(220, 38, 38, 0.1);
}

/* Buttons */
.button-group {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
}

.btn {
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.75rem !important;
  padding: 0.875rem 1.75rem !important;
  border-radius: 10px !important;
  font-weight: 600 !important;
  text-decoration: none !important;
  cursor: pointer !important;
  border: 2px solid transparent !important;
  min-width: 120px !important;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1) !important;
  position: relative !important;
  overflow: hidden !important;
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1) !important;
  justify-content: center !important;
  font-size: 0.925rem !important;
  letter-spacing: 0.025em !important;
  font-family: var(--font-sans) !important;
  min-height: 48px !important;
}

.btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.6s;
}

.btn:hover::before {
  left: 100%;
}

.btn:hover:not(:disabled) {
  transform: translateY(-3px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

.btn:active:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.btn:disabled {
  opacity: 0.5;
  cursor: not-allowed;
}

.btn-primary {
  background: linear-gradient(135deg, var(--primary), #3b82f6);
  color: white;
  border-color: var(--primary);
  box-shadow: 0 4px 20px rgba(37, 99, 235, 0.3);
}

.btn-primary:hover:not(:disabled) {
  background: linear-gradient(135deg, #1d4ed8, #3b82f6);
  box-shadow: 0 8px 30px rgba(37, 99, 235, 0.4);
}

.btn-secondary {
  background: linear-gradient(135deg, var(--bg-card), rgba(99,102,241,0.05));
  color: var(--text);
  border: 2px solid var(--primary);
  font-weight: 600;
  transition: all 0.3s ease;
  box-shadow: 0 4px 15px rgba(99,102,241,0.15);
}

.btn-secondary:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--primary), #6366f1);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(99,102,241,0.25);
}

.dark-theme .btn-secondary {
  background: linear-gradient(135deg, var(--bg-card), rgba(99,102,241,0.08));
  border-color: var(--primary);
  box-shadow: 0 4px 15px rgba(99,102,241,0.2);
}

.btn-warning {
  background: linear-gradient(135deg, var(--warning), #f59e0b);
  color: white;
  border-color: var(--warning);
  box-shadow: 0 4px 20px rgba(217, 119, 6, 0.3);
}

.btn-warning:hover:not(:disabled) {
  background: linear-gradient(135deg, #b45309, #f59e0b);
  box-shadow: 0 8px 30px rgba(217, 119, 6, 0.4);
}

.btn-success {
  background: linear-gradient(135deg, var(--success), #10b981);
  color: white;
  border-color: var(--success);
  box-shadow: 0 4px 20px rgba(5, 150, 105, 0.3);
}

.btn-success:hover:not(:disabled) {
  background: linear-gradient(135deg, #059669, #10b981);
  box-shadow: 0 8px 30px rgba(5, 150, 105, 0.4);
}

.btn-lg {
  padding: 1.125rem 2.25rem;
  font-size: 1.1rem;
  min-height: 56px;
  border-radius: 12px;
}

.btn-sm {
  padding: 0.625rem 1.25rem;
  font-size: 0.825rem;
  min-height: 40px;
  border-radius: 8px;
}

/* Hero CTA Buttons */
.hero-cta-primary, .hero-cta-secondary {
  position: relative;
  overflow: hidden;
  font-size: 1.125rem;
  font-weight: 700;
  padding: 1.25rem 2.5rem;
  min-height: 60px;
  border-radius: 16px;
  box-shadow: 0 8px 32px rgba(37, 99, 235, 0.25);
  transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

.hero-cta-primary {
  background: linear-gradient(135deg, var(--primary), #3b82f6, #6366f1);
  background-size: 200% 200%;
  animation: gradientShift 3s ease infinite;
}

.hero-cta-secondary {
  background: linear-gradient(135deg, var(--bg-card), rgba(99,102,241,0.1));
  border: 3px solid var(--primary);
  box-shadow: 0 8px 32px rgba(99,102,241,0.2);
}

@keyframes gradientShift {
  0%, 100% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
}

.btn-shine {
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, 
    transparent, 
    rgba(255, 255, 255, 0.4), 
    transparent
  );
  transition: left 0.6s ease;
}

.hero-cta-primary:hover .btn-shine,
.hero-cta-secondary:hover .btn-shine {
  left: 100%;
}

.hero-cta-primary:hover {
  transform: translateY(-4px) scale(1.02);
  box-shadow: 0 12px 40px rgba(37, 99, 235, 0.4);
}

.hero-cta-secondary:hover {
  transform: translateY(-4px) scale(1.02);
  background: linear-gradient(135deg, var(--primary), #6366f1);
  color: white;
  box-shadow: 0 12px 40px rgba(99,102,241,0.4);
}

.hero-actions {
  display: flex;
  gap: 1.5rem;
  justify-content: center;
  margin-top: 3rem;
  flex-wrap: wrap;
}

.btn-large {
  padding: 1.125rem 2.25rem;
  font-size: 1.1rem;
  min-height: 56px;
  border-radius: 14px;
  font-weight: 600;
}

/* Enhanced Buttons for Sections */
.btn-enhanced {
  font-weight: 600;
  letter-spacing: 0.025em;
  padding: 0.9rem 1.8rem;
  min-height: 50px;
  border-radius: 12px;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.btn-enhanced:hover:not(:disabled) {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 8px 30px rgba(0, 0, 0, 0.15);
}

.flashcard-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 1.5rem;
}

.flashcard-controls .btn {
  min-width: 120px;
  font-weight: 600;
}

/* Navigation Button Enhancements */
.nav-btn {
  font-weight: 600;
  letter-spacing: 0.025em;
  padding: 0.75rem 1.25rem;
  border-radius: 10px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  min-height: 44px;
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.08);
}

.nav-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 6px 20px rgba(0, 0, 0, 0.12);
}

.nav-btn.active {
  background: linear-gradient(135deg, var(--primary), #6366f1);
  color: white;
  box-shadow: 0 4px 16px rgba(37, 99, 235, 0.3);
}

/* Quiz Button Enhancements */
.quiz-navigation .btn {
  font-weight: 600;
  padding: 0.875rem 1.75rem;
  border-radius: 10px;
  min-height: 48px;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.quiz-navigation .btn:hover:not(:disabled) {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
}

/* Section Header Typography */
.section-title {
  font-size: 2.5rem;
  font-weight: 700;
  letter-spacing: -0.03em;
  line-height: 1.2;
  background: linear-gradient(135deg, var(--text), var(--primary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 1rem;
}

.section-subtitle {
  font-size: 1.25rem;
  line-height: 1.6;
  color: var(--text-light);
  max-width: 800px;
  margin: 0 auto;
}

/* Hero Typography Enhancement */
.hero-title {
  font-size: 3.5rem;
  font-weight: 800;
  letter-spacing: -0.04em;
  line-height: 1.1;
  background: linear-gradient(135deg, var(--text), var(--primary), #6366f1);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  margin-bottom: 1.5rem;
}

.hero-subtitle {
  font-size: 1.375rem;
  line-height: 1.65;
  color: var(--text-light);
  max-width: 900px;
  margin: 0 auto 3rem auto;
  font-weight: 400;
}

/* Special Flashcard Button Styles */
.flashcard-flip-btn {
  background: linear-gradient(135deg, var(--primary), #6366f1, #8b5cf6);
  background-size: 200% 200%;
  animation: gradientShift 3s ease infinite;
  color: white;
  border: none;
  font-weight: 700;
  box-shadow: 0 6px 24px rgba(37, 99, 235, 0.25);
}

.flashcard-flip-btn:hover:not(:disabled) {
  box-shadow: 0 10px 32px rgba(37, 99, 235, 0.35);
  transform: translateY(-3px) scale(1.03);
}

.flashcard-nav-btn {
  border: 2px solid var(--border);
  background: var(--bg);
  color: var(--text);
}

.flashcard-nav-btn:hover:not(:disabled) {
  border-color: var(--primary);
  background: var(--primary);
  color: white;
  box-shadow: 0 8px 24px rgba(37, 99, 235, 0.2);
}

/* Results Page Button Styles */
.results-export-btn {
  background: linear-gradient(135deg, var(--success), #10b981);
  color: white;
  border: none;
  font-weight: 700;
  box-shadow: 0 6px 24px rgba(5, 150, 105, 0.25);
  position: relative;
  overflow: hidden;
}

.results-export-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, #059669, #10b981);
  box-shadow: 0 10px 32px rgba(5, 150, 105, 0.35);
  transform: translateY(-3px) scale(1.02);
}

.results-restart-btn {
  background: linear-gradient(135deg, var(--bg), rgba(37, 99, 235, 0.1));
  border: 2px solid var(--primary);
  color: var(--text);
  font-weight: 700;
  box-shadow: 0 6px 24px rgba(37, 99, 235, 0.15);
}

.results-restart-btn:hover:not(:disabled) {
  background: linear-gradient(135deg, var(--primary), #3b82f6);
  color: white;
  box-shadow: 0 10px 32px rgba(37, 99, 235, 0.35);
  transform: translateY(-3px) scale(1.02);
}

/* Quiz Navigation Specific Styles */
.quiz-navigation {
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 1rem;
  margin-top: 2rem;
  flex-wrap: wrap;
}

.quiz-navigation .btn {
  font-weight: 600;
  letter-spacing: 0.025em;
  min-height: 48px;
  position: relative;
  overflow: hidden;
}

.quiz-navigation .btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
  transition: left 0.6s;
}

.quiz-navigation .btn:hover::before {
  left: 100%;
}

/* Placement Test Styles */
.test-info-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  margin: 3rem 0;
}

.info-card {
  background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-light) 100%);
  border: 2px solid var(--border);
  border-radius: 16px;
  padding: 2.5rem;
  text-align: center !important;
  transition: all 0.4s ease;
  box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
  position: relative;
  overflow: hidden;
}

.info-card::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 4px;
  background: linear-gradient(90deg, var(--primary), var(--success));
  opacity: 0;
  transition: opacity 0.3s ease;
}

.info-card:hover::before {
  opacity: 1;
}

.info-card:hover {
  border-color: var(--primary);
  box-shadow: 0 12px 40px rgba(37, 99, 235, 0.15);
  transform: translateY(-8px);
  background: linear-gradient(135deg, var(--bg-card) 0%, rgba(37, 99, 235, 0.02) 100%);
}

.info-icon {
  font-size: 3.5rem;
  margin-bottom: 1.5rem;
  display: block;
  animation: iconPulse 3s ease-in-out infinite;
}

@keyframes iconPulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

.info-card h3 {
  font-size: 1.5rem;
  font-weight: 700;
  margin-bottom: 1rem;
  color: var(--primary);
  letter-spacing: -0.02em;
  text-align: center;
}

.info-card p {
  color: var(--text-light);
  line-height: 1.6;
  font-size: 0.95rem;
  font-weight: 500;
  text-align: center !important;
}

.test-instructions {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 2.5rem;
  margin: 3rem 0;
}

.test-instructions h2 {
  font-size: 1.75rem;
  font-weight: 700;
  margin-bottom: 2rem;
  color: var(--text);
  text-align: center;
}

.instruction-grid {
  display: grid;
  gap: 2rem;
}

.instruction-item {
  display: flex;
  gap: 1.5rem;
  align-items: flex-start;
}

.instruction-number {
  background: linear-gradient(135deg, var(--primary), #6366f1);
  color: white;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-weight: 700;
  font-size: 1.1rem;
  flex-shrink: 0;
}

.instruction-content h3 {
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--text);
}

.instruction-content p {
  color: var(--text-light);
  line-height: 1.6;
}

.instruction-content ul {
  margin-top: 1rem;
  padding-left: 1.5rem;
}

.instruction-content li {
  margin-bottom: 0.5rem;
  color: var(--text-light);
}

.test-start-section {
  text-align: center;
  margin: 3rem 0;
}

.test-warning {
  background: #fef3c7;
  border: 1px solid #fbbf24;
  border-radius: 8px;
  padding: 1rem 1.5rem;
  margin-bottom: 2rem;
  display: flex;
  align-items: center;
  gap: 0.75rem;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.warning-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
}

.test-warning p {
  margin: 0;
  color: #92400e;
  font-weight: 500;
}

.test-start-btn, #startPlacementTest {
  font-size: 1.125rem !important;
  font-weight: 700 !important;
  padding: 1.25rem 2.5rem !important;
  min-height: 64px !important;
  border-radius: 16px !important;
  background: linear-gradient(135deg, var(--primary), #6366f1, #8b5cf6) !important;
  background-size: 200% 200% !important;
  animation: gradientShift 3s ease infinite !important;
  color: white !important;
  border: none !important;
  box-shadow: 0 8px 32px rgba(37, 99, 235, 0.3) !important;
  margin-bottom: 1rem !important;
  display: inline-flex !important;
  align-items: center !important;
  gap: 0.75rem !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
}

.test-start-btn:hover, #startPlacementTest:hover {
  transform: translateY(-4px) scale(1.02) !important;
  box-shadow: 0 12px 40px rgba(37, 99, 235, 0.4) !important;
}

.test-start-note {
  color: var(--text-light);
  font-style: italic;
  margin: 0;
}

.placement-test-content {
  margin-top: 3rem;
}

.test-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding: 1.5rem;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
}

.test-progress {
  flex: 1;
  margin-right: 2rem;
}

.progress-text {
  font-weight: 600;
  color: var(--text);
  margin-bottom: 0.5rem;
  display: block;
}

.test-timer {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-weight: 700;
  font-size: 1.1rem;
  color: var(--primary);
  background: rgba(37, 99, 235, 0.1);
  padding: 0.75rem 1.25rem;
  border-radius: 8px;
}

.test-question-container {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 2.5rem;
  margin-bottom: 2rem;
}

.question-section {
  display: inline-block;
  background: var(--primary);
  color: white;
  padding: 0.5rem 1rem;
  border-radius: 6px;
  font-size: 0.875rem;
  font-weight: 600;
  margin-bottom: 1.5rem;
}

.level-badge {
  display: inline-block;
  padding: 1rem 2rem;
  border-radius: 12px;
  font-size: 1.5rem;
  font-weight: 800;
  margin: 1rem 0;
}

.level-A1 { background: #fecaca; color: #dc2626; }
.level-A2 { background: #fed7aa; color: #ea580c; }
.level-B1 { background: #fde68a; color: #d97706; }
.level-B2 { background: #bfdbfe; color: #2563eb; }
.level-C1 { background: #c7d2fe; color: #4338ca; }
.level-C2 { background: #ddd6fe; color: #7c3aed; }

.section-results {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1rem;
  margin: 2rem 0;
}

.section-result {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 8px;
  padding: 1.5rem;
  text-align: center;
}

.section-name {
  font-weight: 600;
  margin-bottom: 0.5rem;
  color: var(--text);
}

.section-score {
  font-size: 1.5rem;
  font-weight: 700;
  color: var(--primary);
}

.level-description, .study-recommendations {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  padding: 2rem;
  margin: 2rem 0;
}

.level-description h3, .study-recommendations h3 {
  font-size: 1.25rem;
  font-weight: 700;
  margin-bottom: 1rem;
  color: var(--text);
}

.study-recommendations ul {
  list-style: none;
  padding: 0;
}

.study-recommendations li {
  padding: 0.75rem 0;
  border-bottom: 1px solid var(--border);
  color: var(--text-light);
}

.study-recommendations li:last-child {
  border-bottom: none;
}

@media (max-width: 768px) {
  .test-header {
    flex-direction: column;
    gap: 1rem;
    text-align: center;
  }
  
  .test-progress {
    margin-right: 0;
  }
  
  .instruction-item {
    flex-direction: column;
    text-align: center;
  }
  
  .test-warning {
    flex-direction: column;
    text-align: center;
  }

  /* Question Grid Navigator */
  .question-grid {
    display: flex !important;
    flex-wrap: wrap !important;
    gap: 5px !important;
    margin-bottom: 2rem !important;
    padding: 15px !important;
    background: var(--bg-card) !important;
    border: 2px solid var(--border) !important;
    border-radius: 10px !important;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1) !important;
    max-width: 520px !important;
    margin-left: auto !important;
    margin-right: auto !important;
    width: 100% !important;
    height: auto !important;
    justify-content: center !important;
  }

  /* Mobile responsive for navigator */
  @media (max-width: 768px) {
    .question-grid {
      gap: 3px !important;
      padding: 8px !important;
      max-width: 100% !important;
    }
    
    .question-grid-item {
      flex: 0 0 calc(10% - 3px) !important;
      width: 24px !important;
      height: 24px !important;
      font-size: 10px !important;
    }
  }

  @media (max-width: 480px) {
    .question-grid {
      gap: 2px !important;
      padding: 6px !important;
    }
    
    .question-grid-item {
      flex: 0 0 calc(10% - 2px) !important;
      width: 20px !important;
      height: 20px !important;
      font-size: 9px !important;
    }
  }

  .question-grid-item {
    flex: 0 0 calc(10% - 4px) !important;
    aspect-ratio: 1 !important;
    width: 28px !important;
    height: 28px !important;
    border: 1px solid var(--border) !important;
    border-radius: 50% !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    font-weight: 600 !important;
    font-size: 12px !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    background: var(--bg) !important;
    color: var(--text) !important;
    position: relative !important;
    user-select: none !important;
    text-align: center !important;
    box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
  }

  .question-grid-item:hover {
    border-color: var(--primary);
    transform: scale(1.1);
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    z-index: 2;
  }

  .question-grid-item.current {
    background: linear-gradient(135deg, var(--primary) 0%, #4f46e5 100%);
    color: white;
    border-color: var(--primary);
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.3);
    transform: scale(1.05);
  }

  .question-grid-item.answered {
    background: linear-gradient(135deg, #10b981 0%, #059669 100%);
    color: white;
    border-color: #10b981;
  }

  .question-grid-item.answered::after {
    content: "✓";
    position: absolute;
    top: -5px;
    right: -5px;
    background: #059669;
    color: white;
    width: 18px;
    height: 18px;
    border-radius: 50%;
    font-size: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid white;
  }

  .question-grid-item.unanswered {
    background: var(--bg);
    border-color: var(--border);
    color: var(--text-light);
  }

  /* Question Options Styling */
  .option-btn, .test-option, button.option-btn, button.test-option, #testQuestionOptions button, #testQuestionOptions .option-btn, #testQuestionOptions .test-option {
    width: 100% !important;
    padding: 16px 20px !important;
    margin: 8px 0 !important;
    border: 2px solid var(--border) !important;
    border-radius: 10px !important;
    background: var(--bg) !important;
    color: var(--text) !important;
    font-size: 16px !important;
    font-weight: 500 !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    text-align: left !important;
    display: flex !important;
    align-items: center !important;
    justify-content: flex-start !important;
    min-height: 60px !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
    font-family: inherit !important;
    outline: none !important;
  }

  .option-btn:hover, .test-option:hover, button.option-btn:hover, button.test-option:hover, #testQuestionOptions button:hover, #testQuestionOptions .option-btn:hover, #testQuestionOptions .test-option:hover {
    border-color: var(--primary) !important;
    background: var(--bg-light) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 4px 16px rgba(0,0,0,0.12) !important;
  }

  .option-btn.selected, .test-option.selected, button.option-btn.selected, button.test-option.selected, #testQuestionOptions button.selected, #testQuestionOptions .option-btn.selected, #testQuestionOptions .test-option.selected {
    background: linear-gradient(135deg, var(--primary) 0%, #4f46e5 100%) !important;
    color: white !important;
    border-color: var(--primary) !important;
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3) !important;
  }

  .word-matching {
    text-align: center;
    padding: 25px;
    background: var(--bg-light);
    border-radius: 12px;
    border: 1px solid var(--border);
  }

  .word-matching p {
    font-size: 20px;
    margin-bottom: 30px;
    color: var(--text);
    font-weight: 700;
    background: var(--bg);
    padding: 15px;
    border-radius: 8px;
    border: 1px solid var(--border);
  }

  .word-matching .option-btn {
    max-width: 500px;
    margin: 12px auto;
    justify-content: center;
    text-align: center;
    padding: 20px 30px;
    font-size: 17px;
  }

  .passage-content {
    background: var(--bg-light);
    border: 2px solid var(--primary);
    border-radius: 16px;
    padding: 30px;
    margin-bottom: 30px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    position: relative;
  }

  .passage-content::before {
    content: '📖';
    position: absolute;
    top: -15px;
    left: 30px;
    background: var(--primary);
    color: white;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
  }

  .passage-content h4 {
    margin: 0 0 20px 0;
    color: var(--primary);
    font-weight: 700;
    font-size: 20px;
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .passage-content p {
    line-height: 1.8;
    color: var(--text);
    margin: 0;
    font-size: 17px;
    text-align: justify;
  }

  /* Test Question Container */
  .test-question-container {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 35px;
    margin-bottom: 25px;
    box-shadow: 0 8px 24px rgba(0,0,0,0.1);
    border: 2px solid var(--border);
    max-width: 1000px;
    margin-left: auto;
    margin-right: auto;
  }

  .question-section {
    font-size: 18px;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 25px;
    padding: 15px 20px;
    background: var(--bg-light);
    border-radius: 12px;
    border: 2px solid var(--primary);
    text-align: center;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .question-content {
    margin-bottom: 30px;
    padding: 20px;
    background: var(--bg-light);
    border-radius: 12px;
    border: 1px solid var(--border);
  }

  .question-content h3 {
    font-size: 22px;
    color: var(--text);
    margin-bottom: 25px;
    line-height: 1.7;
    font-weight: 600;
  }

  /* Fix for test question options container */
  .question-options, #testQuestionOptions {
    display: flex !important;
    flex-direction: column !important;
    gap: 12px !important;
    margin-top: 25px !important;
    width: 100% !important;
  }

  /* Ensure option buttons in placement test are styled correctly */
  #testQuestionOptions .option-btn, 
  #testQuestionOptions .test-option,
  #testQuestionOptions button,
  .test-question-container .option-btn,
  .test-question-container button {
    width: 100% !important;
    padding: 16px 20px !important;
    margin: 8px 0 !important;
    border: 2px solid var(--border) !important;
    border-radius: 10px !important;
    background: var(--bg) !important;
    color: var(--text) !important;
    font-size: 16px !important;
    font-weight: 500 !important;
    cursor: pointer !important;
    transition: all 0.3s ease !important;
    text-align: left !important;
    display: flex !important;
    align-items: center !important;
    min-height: 60px !important;
    box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
    font-family: inherit !important;
  }

  #testQuestionOptions .option-btn:hover, 
  #testQuestionOptions .test-option:hover,
  #testQuestionOptions button:hover,
  .test-question-container .option-btn:hover,
  .test-question-container button:hover {
    border-color: var(--primary) !important;
    background: var(--bg-light) !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 16px rgba(0,0,0,0.12) !important;
  }

  #testQuestionOptions .option-btn.selected, 
  #testQuestionOptions .test-option.selected,
  #testQuestionOptions button.selected,
  .test-question-container .option-btn.selected,
  .test-question-container button.selected {
    background: linear-gradient(135deg, var(--primary) 0%, #4f46e5 100%) !important;
    color: white !important;
    border-color: var(--primary) !important;
    box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3) !important;
    transform: translateY(-1px) !important;
  }

  /* Enhanced Placement Test Styling */
  .placement-test-section {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    background: var(--bg-card);
    border-radius: 16px;
    margin-bottom: 2rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
    border: 1px solid var(--border);
  }

  .placement-test-content {
    max-width: 1200px;
    margin: 0 auto;
    padding: 2rem;
    background: var(--bg);
    border-radius: 16px;
    min-height: 100vh;
  }

  .test-container {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 2rem;
    border: 1px solid var(--border);
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.08);
  }

  /* Test Header Styling */
  .test-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--bg-card);
    padding: 20px 30px;
    border-radius: 16px;
    margin-bottom: 30px;
    box-shadow: 0 4px 16px rgba(0,0,0,0.1);
    border: 2px solid var(--border);
  }

  .test-progress {
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .progress-bar {
    width: 200px;
    height: 8px;
    background: var(--bg-light);
    border-radius: 4px;
    overflow: hidden;
    border: 1px solid var(--border);
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary) 0%, #4f46e5 100%);
    transition: width 0.3s ease;
  }

  .progress-text {
    font-weight: 600;
    color: var(--text);
    font-size: 16px;
  }

  .test-timer {
    display: flex;
    align-items: center;
    gap: 8px;
    font-weight: 700;
    font-size: 20px;
    color: var(--primary);
    padding: 10px 20px;
    background: var(--bg-light);
    border-radius: 12px;
    border: 2px solid var(--primary);
  }

  .timer-icon {
    font-size: 18px;
  }

  .test-start-section {
    text-align: center;
    padding: 4rem 2rem;
    background: linear-gradient(135deg, var(--bg-card) 0%, var(--bg-light) 100%);
    border-radius: 16px;
    border: 2px solid var(--border);
  }

  .test-start-section h2 {
    color: var(--primary);
    margin-bottom: 1.5rem;
    font-size: 2.5rem;
    font-weight: 700;
    background: linear-gradient(135deg, var(--primary) 0%, #4f46e5 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .test-start-section p {
    color: var(--text-light);
    margin-bottom: 3rem;
    font-size: 1.2rem;
    line-height: 1.7;
    max-width: 600px;
    margin-left: auto;
    margin-right: auto;
  }

  .test-info {
    background: var(--bg-light);
    border-radius: 12px;
    padding: 2rem;
    margin-bottom: 3rem;
    border: 2px solid var(--primary);
    position: relative;
    overflow: hidden;
  }

  .test-info::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 4px;
    background: linear-gradient(90deg, var(--primary) 0%, #4f46e5 100%);
  }

  .test-info h3 {
    color: var(--primary);
    margin-bottom: 1.5rem;
    font-size: 1.5rem;
    font-weight: 600;
  }

  .test-info ul {
    list-style: none;
    padding: 0;
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 1rem;
  }

  .test-info li {
    padding: 1rem;
    color: var(--text);
    background: var(--bg);
    border-radius: 8px;
    border: 1px solid var(--border);
    display: flex;
    align-items: center;
    font-weight: 500;
  }

  .test-info li:before {
    content: "✓";
    background: var(--primary);
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 12px;
    font-weight: bold;
    margin-right: 1rem;
    flex-shrink: 0;
  }

  .test-warning {
    background: linear-gradient(135deg, #fff3cd 0%, #ffeaa7 100%);
    border: 2px solid #f39c12;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 3rem;
    color: #856404;
    position: relative;
  }

  .test-warning::before {
    content: "⚠️";
    position: absolute;
    top: -10px;
    left: 20px;
    background: #f39c12;
    color: white;
    width: 32px;
    height: 32px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 16px;
  }

  .test-warning strong {
    display: block;
    margin-bottom: 0.5rem;
    font-size: 1.1rem;
  }

  .test-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
    padding: 1.5rem;
    background: linear-gradient(135deg, var(--bg-light) 0%, var(--bg-card) 100%);
    border-radius: 12px;
    border: 2px solid var(--border);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }

  .test-progress {
    display: flex;
    align-items: center;
    gap: 1.5rem;
    flex: 1;
  }

  .test-progress span {
    font-weight: 600;
    color: var(--text);
    font-size: 1.1rem;
  }

  .progress-bar {
    width: 300px;
    height: 12px;
    background: var(--bg);
    border-radius: 6px;
    overflow: hidden;
    border: 2px solid var(--border);
    position: relative;
  }

  .progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--primary) 0%, #4f46e5 100%);
    transition: width 0.4s cubic-bezier(0.4, 0, 0.2, 1);
    position: relative;
  }

  .progress-fill::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, transparent 0%, rgba(255,255,255,0.3) 50%, transparent 100%);
    animation: progress-shine 2s ease-in-out infinite;
  }

  @keyframes progress-shine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
  }

  .test-timer {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 700;
    color: var(--primary);
    background: var(--bg);
    padding: 0.75rem 1.25rem;
    border-radius: 8px;
    border: 2px solid var(--primary);
    font-size: 1.1rem;
  }

  .test-timer::before {
    content: "⏱️";
    font-size: 1.2rem;
  }

  .test-navigation {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-top: 3rem;
    padding: 25px 30px;
    background: var(--bg-card);
    border-radius: 16px;
    border: 2px solid var(--border);
    box-shadow: 0 4px 16px rgba(0,0,0,0.08);
  }

  .test-navigation button {
    padding: 1rem 2rem;
    border-radius: 12px;
    border: none;
    background: linear-gradient(135deg, var(--primary) 0%, #4f46e5 100%);
    color: white;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    font-size: 1rem;
    min-width: 120px;
    box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
  }

  .test-navigation .btn:disabled {
    opacity: 0.5;
    cursor: not-allowed;
  }

  .test-navigation button:not(:disabled):hover {
    transform: translateY(-2px);
    box-shadow: 0 8px 20px rgba(59, 130, 246, 0.4);
  }

  .test-navigation button:not(:disabled):active {
    transform: translateY(0);
  }

  /* Results Section Enhanced */
  .placement-results {
    background: var(--bg-card);
    border-radius: 16px;
    padding: 3rem;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
    border: 1px solid var(--border);
    max-width: 1200px;
    margin: 0 auto;
  }

  .results-header {
    text-align: center;
    margin-bottom: 3rem;
  }

  .level-badge {
    display: inline-block;
    padding: 1rem 2rem;
    border-radius: 50px;
    font-size: 1.5rem;
    font-weight: 700;
    margin-bottom: 2rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    box-shadow: 0 4px 16px rgba(0, 0, 0, 0.2);
  }

  .level-badge.level-A1 { background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%); color: white; }
  .level-badge.level-A2 { background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); color: white; }
  .level-badge.level-B1 { background: linear-gradient(135deg, #eab308 0%, #ca8a04 100%); color: white; }
  .level-badge.level-B2 { background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%); color: white; }
  .level-badge.level-C1 { background: linear-gradient(135deg, #3b82f6 0%, #2563eb 100%); color: white; }
  .level-badge.level-C2 { background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%); color: white; }

  .results-summary {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1.5rem;
    margin-bottom: 3rem;
  }

  .result-card {
    background: var(--bg-light);
    border: 2px solid var(--border);
    border-radius: 12px;
    padding: 1.5rem;
    text-align: center;
    transition: all 0.3s ease;
  }

  .result-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
    border-color: var(--primary);
  }

  .result-card h4 {
    color: var(--text-light);
    font-size: 0.9rem;
    text-transform: uppercase;
    letter-spacing: 1px;
    margin-bottom: 0.5rem;
  }

  .result-card .value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--primary);
  }

  /* Section Results Styling */
  .section-results {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
    gap: 1rem;
    margin-top: 1rem;
  }

  .section-result {
    background: var(--bg);
    border: 1px solid var(--border);
    border-radius: 8px;
    padding: 1rem;
    text-align: center;
  }

  .section-name {
    font-weight: 600;
    color: var(--text);
    margin-bottom: 0.5rem;
  }

  .section-score {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
    margin-bottom: 0.25rem;
  }

  .section-percentage {
    color: var(--text-light);
    font-size: 0.9rem;
  }

  /* Mobile Responsive */
  @media (max-width: 768px) {
    .question-grid {
      grid-template-columns: repeat(8, 1fr);
      gap: 8px;
      padding: 20px;
      max-width: 100%;
    }

    .question-grid-item {
      min-width: 42px;
      min-height: 42px;
      font-size: 14px;
    }

    .test-header {
      flex-direction: column;
      gap: 1rem;
      text-align: center;
    }

    .progress-bar {
      width: 250px;
    }

    .test-navigation {
      flex-direction: column;
      gap: 1rem;
    }

    .test-navigation button {
      width: 100%;
    }

    .placement-test-section,
    .placement-results {
      padding: 1.5rem;
    }
  }

  @media (max-width: 480px) {
    .question-grid {
      grid-template-columns: repeat(6, 1fr);
      gap: 6px;
      padding: 15px;
    }

    .question-grid-item {
      min-width: 38px;
      min-height: 38px;
      font-size: 13px;
    }

    .test-start-section h2 {
      font-size: 2rem;
    }

    .test-start-section p {
      font-size: 1rem;
    }
  }
}

/* Enhanced Cards */
.info-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem;
  margin-top: 1rem;
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}

.info-card:hover {
  box-shadow: var(--shadow-lg);
  transform: translateY(-2px);
}

/* Modern Footer Styles */
.site-footer {
  background: var(--bg-card);
  border-top: 1px solid var(--border);
  padding: 3rem 2rem 2rem;
  margin-top: 4rem;
}

.footer-container {
  max-width: 1200px;
  margin: 0 auto;
}

.footer-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2.5rem;
  margin-bottom: 2.5rem;
}

.footer-section {
  display: flex;
  flex-direction: column;
}

.footer-title {
  color: var(--primary);
  font-size: 1.4rem;
  font-weight: 700;
  margin-bottom: 1rem;
  background: linear-gradient(135deg, var(--primary), #8b5cf6);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.footer-subtitle {
  color: var(--text);
  font-size: 1.1rem;
  font-weight: 600;
  margin-bottom: 1.2rem;
}

.footer-description {
  color: var(--text-light);
  line-height: 1.6;
  margin-bottom: 1.5rem;
  font-size: 0.95rem;
}

.footer-social {
  display: flex;
  flex-wrap: wrap;
  gap: 1rem;
}

.footer-link {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  color: var(--primary);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.3s ease;
  padding: 0.5rem 0.75rem;
  border-radius: 6px;
  background: rgba(59, 130, 246, 0.1);
}

.footer-link:hover {
  background: var(--primary);
  color: white;
  transform: translateY(-1px);
}

.link-icon {
  font-size: 1rem;
}

.footer-features {
  list-style: none;
  padding: 0;
  margin: 0;
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.footer-features li {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--text-light);
  font-size: 0.9rem;
  line-height: 1.5;
  transition: color 0.3s ease;
}

.footer-features li:hover {
  color: var(--text);
}

.feature-icon {
  font-size: 1.1rem;
  flex-shrink: 0;
}

.footer-nav {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
}

.footer-nav-link {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  color: var(--text-light);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.3s ease;
  padding: 0.5rem 0;
  border-radius: 4px;
}

.footer-nav-link:hover {
  color: var(--primary);
  padding-left: 0.5rem;
}

.nav-icon {
  font-size: 1rem;
  flex-shrink: 0;
}

.footer-bottom {
  border-top: 1px solid var(--border);
  padding-top: 2rem;
  display: flex;
  justify-content: space-between;
  align-items: center;
  flex-wrap: wrap;
  gap: 1.5rem;
}

.footer-copyright {
  color: var(--text-muted);
  font-size: 0.9rem;
}

.footer-badges {
  display: flex;
  align-items: center;
  gap: 1rem;
  flex-wrap: wrap;
}

.footer-badge {
  color: #10b981;
  font-size: 0.85rem;
  font-weight: 500;
  padding: 0.25rem 0.75rem;
  background: rgba(16, 185, 129, 0.1);
  border-radius: 20px;
  border: 1px solid rgba(16, 185, 129, 0.2);
}

@media (max-width: 768px) {
  .footer-grid {
    grid-template-columns: 1fr;
    gap: 2rem;
  }
  
  .footer-bottom {
    flex-direction: column;
    text-align: center;
    gap: 1rem;
  }
  
  .footer-social {
    justify-content: center;
  }
  
  .footer-badges {
    justify-content: center;
  }
}

.generator-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 1rem;
}

.reset-prompt-btn {
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: var(--bg-light);
  border: 1px solid var(--border);
  border-radius: var(--radius-sm);
  color: var(--text-muted);
  font-size: 0.875rem;
  cursor: pointer;
  transition: all 0.2s ease;
}

.reset-prompt-btn:hover {
  background: var(--border);
  color: var(--text);
}

.info-card h3 {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 1rem;
}

.info-card ul {
  list-style: none;
  display: grid;
  gap: 0.5rem;
}

.info-card li {
  color: var(--text-light);
  font-size: 0.9rem;
}

/* Quiz Section Styles */
.quiz-header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  padding: 1rem;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
}

.quiz-progress {
  flex: 1;
  max-width: 400px;
}

.progress-info {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 0.5rem;
  font-size: 0.875rem;
  color: var(--text-light);
}

.progress-bar {
  height: 8px;
  background: var(--bg-light);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 0.5rem;
}

.progress-fill {
  height: 100%;
  background: var(--primary);
  transition: width 0.3s ease;
  border-radius: 4px;
}

.progress-percentage {
  text-align: center;
  font-size: 0.75rem;
  color: var(--text-light);
}

.quiz-timer {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.5rem 1rem;
  background: var(--bg-light);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  color: var(--text);
  font-weight: 600;
}

.quiz-timer.warning {
  color: var(--warning);
  animation: pulse 1s infinite;
}

.quiz-timer.danger {
  color: var(--danger);
  animation: pulse 0.5s infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.5; }
}

.quiz-card {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2rem;
  box-shadow: var(--shadow);
}

.reading-passage {
  background: var(--bg-light);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.reading-passage h3 {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 1rem;
  display: flex;
  align-items: center;
  gap: 0.5rem;
}

.reading-passage h3::before {
  content: "📖";
  font-size: 1.2rem;
}

.passage-content {
  font-size: 1rem;
  line-height: 1.7;
  color: var(--text);
  background: var(--bg);
  padding: 1rem;
  border-radius: 6px;
  border: 1px solid var(--border);
  white-space: pre-wrap;
}

.question-container {
  margin-bottom: 2rem;
}

.question-text {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text);
  line-height: 1.6;
}

.options-container {
  display: grid;
  gap: 1rem;
  margin-bottom: 2rem;
}

.option-item {
  padding: 1rem;
  border: 2px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg);
  cursor: pointer;
  transition: all 0.2s;
  display: flex;
  align-items: center;
  gap: 1rem;
}

.option-item:hover {
  border-color: var(--primary);
  background: var(--bg-light);
}

.option-item.selected {
  border-color: var(--primary);
  background: rgba(37, 99, 235, 0.1);
}

.option-item.correct {
  border-color: var(--success);
  background: rgba(5, 150, 105, 0.1);
}

.option-item.incorrect {
  border-color: var(--danger);
  background: rgba(220, 38, 38, 0.1);
}

.option-letter {
  display: flex;
  align-items: center;
  justify-content: center;
  width: 32px;
  height: 32px;
  border-radius: 50%;
  background: var(--bg-light);
  color: var(--text);
  font-weight: 600;
  font-size: 0.875rem;
  border: 1px solid var(--border);
}

.option-item.selected .option-letter {
  background: var(--primary);
  color: white;
  border-color: var(--primary);
}

.option-text {
  flex: 1;
  color: var(--text);
}

.quiz-navigation {
  display: flex;
  gap: 1rem;
  justify-content: space-between;
  align-items: center;
}

.btn-success {
  background: var(--success);
  color: white;
  border-color: var(--success);
}

.btn-success:hover:not(:disabled) {
  opacity: 0.9;
}

/* Results Section */
.results-header {
  text-align: center;
  margin-bottom: 2rem;
}

.trophy-animation {
  font-size: 4rem;
  margin-bottom: 1rem;
  animation: bounce 2s infinite;
}

@keyframes bounce {
  0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
  40% { transform: translateY(-10px); }
  60% { transform: translateY(-5px); }
}

.results-header h2 {
  font-size: 2rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 0.5rem;
}

.results-header p {
  color: var(--text-light);
  font-size: 1.1rem;
}

.results-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 1.5rem;
  margin-bottom: 2rem;
}

.result-card {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem;
  text-align: center;
  box-shadow: var(--shadow);
}

.result-icon {
  font-size: 2rem;
  margin-bottom: 1rem;
}

.result-value {
  font-size: 2.5rem;
  font-weight: 700;
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.result-label {
  color: var(--text-light);
  font-size: 0.875rem;
  text-transform: uppercase;
  letter-spacing: 0.05em;
  font-weight: 500;
}

.results-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
}

.detailed-results {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem;
  margin-top: 1rem;
}

.detailed-results h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 1rem;
}

.result-item {
  padding: 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  margin-bottom: 1rem;
  background: var(--bg-light);
}

.result-item.correct {
  border-color: var(--success);
  background: rgba(5, 150, 105, 0.05);
}

.result-item.incorrect {
  border-color: var(--danger);
  background: rgba(220, 38, 38, 0.05);
}

.result-question {
  font-weight: 600;
  color: var(--text);
  margin-bottom: 0.5rem;
}

.result-answers {
  font-size: 0.875rem;
  color: var(--text-light);
}

.result-explanation {
  margin-top: 0.5rem;
  padding: 0.75rem;
  background: var(--bg);
  border-radius: 4px;
  font-size: 0.875rem;
  color: var(--text-light);
  font-style: italic;
}

/* Toast Notifications */
.toast-container {
  position: fixed;
  top: 20px;
  right: 20px;
  z-index: 1000;
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.toast {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 1rem 1.5rem;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
  min-width: 300px;
  animation: slideIn 0.3s ease;
}

.toast.success {
  border-color: var(--success);
  background: rgba(5, 150, 105, 0.1);
}

.toast.error {
  border-color: var(--danger);
  background: rgba(220, 38, 38, 0.1);
}

.toast.warning {
  border-color: var(--warning);
  background: rgba(217, 119, 6, 0.1);
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.toast-content {
  flex: 1;
}

.toast-title {
  font-weight: 600;
  color: var(--text);
  font-size: 0.875rem;
}

.toast-message {
  color: var(--text-light);
  font-size: 0.8rem;
}

.toast-close {
  background: none;
  border: none;
  color: var(--text-light);
  cursor: pointer;
  padding: 0.25rem;
  border-radius: 4px;
}

.toast-close:hover {
  background: var(--bg-light);
}

/* Loading Overlay */
.loading-overlay {
  position: fixed;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(0, 0, 0, 0.5);
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  z-index: 2000;
}

.loading-spinner {
  width: 40px;
  height: 40px;
  border: 3px solid var(--border);
  border-top: 3px solid var(--primary);
  border-radius: 50%;
  animation: spin 1s linear infinite;
  margin-bottom: 1rem;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

.loading-overlay p {
  color: white;
  font-size: 1.1rem;
  font-weight: 500;
}

/* Feature Tabs */
.feature-tabs {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  overflow: hidden;
  box-shadow: var(--shadow);
}

.tab-buttons {
  display: flex;
  background: var(--bg-light);
  border-bottom: 1px solid var(--border);
}

.tab-btn {
  flex: 1;
  padding: 1rem;
  background: none;
  border: none;
  color: var(--text-light);
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s;
  border-right: 1px solid var(--border);
}

.tab-btn:last-child {
  border-right: none;
}

.tab-btn:hover {
  background: var(--bg);
  color: var(--text);
}

.tab-btn.active {
  background: var(--bg);
  color: var(--primary);
  font-weight: 600;
}

.tab-content {
  display: none;
  padding: 1.5rem;
}

.tab-content.active {
  display: block;
}

.tab-content h3 {
  font-size: 1.1rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 1rem;
}

.tab-content ul {
  list-style: none;
  padding: 0;
  margin: 0;
}

.tab-content li {
  padding: 0.5rem 0;
  color: var(--text-light);
  font-size: 0.9rem;
}

.example-prompt {
  background: var(--bg-light);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 1rem;
  margin-bottom: 1rem;
}

.example-prompt h4 {
  font-size: 1rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 0.5rem;
}

.prompt-text {
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 4px;
  padding: 0.75rem;
  font-family: 'Courier New', monospace;
  font-size: 0.8rem;
  color: var(--text);
  cursor: pointer;
  transition: all 0.2s;
  white-space: pre-wrap;
  max-height: 200px;
  overflow-y: auto;
}

.prompt-text:hover {
  border-color: var(--primary);
  background: var(--bg-light);
}

.example-prompt small {
  color: var(--text-light);
  font-size: 0.75rem;
  margin-top: 0.5rem;
  display: block;
}

.tip-item {
  background: var(--bg-light);
  border: 1px solid var(--border);
  border-radius: 6px;
  padding: 1rem;
  margin-bottom: 1rem;
}

.tip-item h4 {
  font-size: 0.95rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 0.5rem;
}

.tip-item p {
  color: var(--text-light);
  font-size: 0.875rem;
  margin: 0;
  line-height: 1.5;
}

/* Navigation Styles */
.main-nav {
  display: flex;
  gap: 0.5rem;
}

.nav-btn {
  display: flex;
  align-items: center;
  gap: 0.5rem;
  padding: 0.75rem 1rem;
  background: transparent;
  border: none;
  border-radius: var(--radius);
  color: var(--text-light);
  font-size: 0.875rem;
  font-weight: 500;
  cursor: pointer;
  transition: all 0.2s ease;
}

.nav-btn:hover {
  background: var(--bg-light);
  color: var(--text);
}

.nav-btn.active {
  background: var(--primary);
  color: white;
}

.nav-btn svg {
  width: 16px;
  height: 16px;
}

/* Prompt Generator Styles */
.prompt-generator {
  background: var(--bg-light);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem;
  margin-bottom: 2rem;
}

.generator-form {
  margin-bottom: 1rem;
}

.form-row {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1rem;
  margin-bottom: 1rem;
}

.form-group {
  display: flex;
  flex-direction: column;
  gap: 0.5rem;
}

.form-group label {
  font-weight: 500;
  color: var(--text);
}

.form-group select {
  padding: 0.75rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg);
  color: var(--text);
  font-size: 0.875rem;
}

.generated-prompt {
  margin-top: 1rem;
  padding: 1rem;
  background: var(--bg);
  border: 1px solid var(--success);
  border-radius: var(--radius);
}

.generated-prompt h5 {
  margin: 0 0 0.75rem 0;
  color: var(--success);
  font-weight: 600;
}

/* Flashcard Section Styles */
.flashcard-section {
  max-width: 800px;
  margin: 0 auto;
}

.flashcard-header {
  text-align: center;
  margin-bottom: 2rem;
}

.flashcard-header h2 {
  margin: 0 0 0.5rem 0;
  color: var(--text);
}

.flashcard-header p {
  color: var(--text-light);
  margin: 0;
}

.flashcard-input {
  margin-bottom: 2rem;
}

.input-section label {
  display: block;
  font-weight: 500;
  color: var(--text);
  margin-bottom: 0.5rem;
}

#vocabularyInput {
  width: 100%;
  min-height: 200px;
  padding: 1rem;
  border: 1px solid var(--border);
  border-radius: var(--radius);
  background: var(--bg);
  color: var(--text);
  font-family: monospace;
  font-size: 0.875rem;
  resize: vertical;
}

.flashcard-actions {
  display: flex;
  gap: 1rem;
  margin-top: 1rem;
  flex-wrap: wrap;
}

.flashcard-container {
  text-align: center;
}

.flashcard-controls {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 2rem;
  flex-wrap: wrap;
  gap: 1rem;
}

.flashcard-info {
  font-weight: 500;
  color: var(--text);
}

.flashcard-buttons {
  display: flex;
  gap: 0.5rem;
}

.flashcard {
  width: 100%;
  max-width: 400px;
  height: 250px;
  margin: 0 auto 2rem auto;
  perspective: 1000px;
  cursor: pointer;
}

.flashcard-inner {
  position: relative;
  width: 100%;
  height: 100%;
  text-align: center;
  transition: transform 0.6s;
  transform-style: preserve-3d;
}

.flashcard.flipped .flashcard-inner {
  transform: rotateY(180deg);
}

.flashcard-front, .flashcard-back {
  position: absolute;
  width: 100%;
  height: 100%;
  backface-visibility: hidden;
  border: 2px solid var(--border);
  border-radius: var(--radius);
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  padding: 2rem;
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
}

.flashcard-front {
  background: linear-gradient(145deg, var(--bg-card), rgba(99,102,241,0.03));
  border: 2px solid rgba(99,102,241,0.1);
}

.flashcard:hover .flashcard-front {
  background: linear-gradient(145deg, var(--bg-card), rgba(99,102,241,0.08));
  border-color: rgba(99,102,241,0.2);
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.1);
}

.dark-theme .flashcard-front {
  background: linear-gradient(145deg, var(--bg-card), rgba(99,102,241,0.05));
  border: 2px solid rgba(99,102,241,0.15);
  color: var(--text);
}

.dark-theme .flashcard:hover .flashcard-front {
  background: linear-gradient(145deg, var(--bg-card), rgba(99,102,241,0.12));
  border-color: rgba(99,102,241,0.3);
}

.flashcard-back {
  background: linear-gradient(135deg, var(--primary), #6366f1);
  color: white;
  transform: rotateY(180deg);
}

.flashcard-back:hover {
  background: linear-gradient(135deg, #3b82f6, #5b21b6);
}

.word {
  font-size: 2rem;
  font-weight: 700;
  color: var(--text);
  margin-bottom: 1rem;
  word-break: break-word;
}

.hint {
  font-size: 0.875rem;
  color: var(--text-light);
  font-style: italic;
}

.turkish {
  font-size: 1.5rem;
  font-weight: 600;
  margin-bottom: 1rem;
}

.definition {
  font-size: 1rem;
  line-height: 1.4;
  opacity: 0.9;
}

.progress-bar {
  width: 100%;
  height: 8px;
  background: var(--bg-light);
  border-radius: 4px;
  overflow: hidden;
  margin-bottom: 2rem;
}

.progress-fill {
  height: 100%;
  background: var(--primary);
  transition: width 0.3s ease;
  width: 0%;
}

.vocab-helper {
  margin-top: 3rem;
  padding-top: 3rem;
  border-top: 1px solid var(--border);
}

.vocab-helper h3 {
  text-align: center;
  margin-bottom: 2rem;
  color: var(--text);
}

.helper-prompts {
  display: grid;
  gap: 1rem;
}

.helper-prompt {
  background: var(--bg-light);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1rem;
}

.helper-prompt h4 {
  margin: 0 0 0.75rem 0;
  color: var(--text);
}

/* Copy animation */
.copied {
  background: rgba(5, 150, 105, 0.1) !important;
  border-color: var(--success) !important;
}

/* Global test option button override - force visibility and styling */
button[data-option], button[onclick*="selectAnswer"], [id*="testQuestionOptions"] button {
  display: flex !important;
  align-items: center !important;
  justify-content: flex-start !important;
  width: 100% !important;
  padding: 16px 20px !important;
  margin: 8px 0 !important;
  border: 2px solid var(--border) !important;
  border-radius: 10px !important;
  background: var(--bg) !important;
  color: var(--text) !important;
  font-size: 16px !important;
  cursor: pointer !important;
  transition: all 0.3s ease !important;
  text-align: left !important;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important;
  min-height: 60px !important;
  font-family: inherit !important;
  font-weight: 500 !important;
  visibility: visible !important;
  opacity: 1 !important;
}

button[data-option]:hover, button[onclick*="selectAnswer"]:hover, [id*="testQuestionOptions"] button:hover {
  border-color: var(--primary) !important;
  background: var(--bg-light) !important;
  transform: translateY(-2px) !important;
  box-shadow: 0 4px 16px rgba(0,0,0,0.12) !important;
}

button[data-option].selected, button[onclick*="selectAnswer"].selected, [id*="testQuestionOptions"] button.selected {
  background: linear-gradient(135deg, var(--primary) 0%, #4f46e5 100%) !important;
  color: white !important;
  border-color: var(--primary) !important;
  box-shadow: 0 6px 20px rgba(59, 130, 246, 0.3) !important;
}

/* Question Grid Item Hover States */
.question-grid-item:hover {
  border-color: var(--primary) !important;
  transform: scale(1.1) !important;
  box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3) !important;
  z-index: 2 !important;
}

/* Mevcut soru - Turuncu/Kırmızı */
.question-grid-item.current {
  background: #f97316 !important;
  color: white !important;
  border: 2px solid #ea580c !important;
  box-shadow: 0 0 0 2px rgba(249, 115, 22, 0.5) !important;
  transform: scale(1.05) !important;
  font-weight: 700 !important;
}

/* İşaretlenen sorular - Yeşil */
.question-grid-item.answered {
  background: linear-gradient(135deg, #10b981 0%, #059669 100%) !important;
  color: white !important;
  border-color: #10b981 !important;
  box-shadow: 0 2px 6px rgba(16, 185, 129, 0.3) !important;
}

.question-grid-item.answered::after {
  content: "✓" !important;
  position: absolute !important;
  top: -3px !important;
  right: -3px !important;
  background: #059669 !important;
  color: white !important;
  width: 14px !important;
  height: 14px !important;
  border-radius: 50% !important;
  font-size: 8px !important;
  display: flex !important;
  align-items: center !important;
  justify-content: center !important;
  border: 1px solid white !important;
}

/* Boş bırakılan sorular - Gri */
.question-grid-item.unanswered {
  background: #f3f4f6 !important;
  border-color: #d1d5db !important;
  color: #6b7280 !important;
}

.dark-theme .question-grid-item.unanswered {
  background: #374151 !important;
  border-color: #4b5563 !important;
  color: #9ca3af !important;
}

/* Mobile Responsive */
@media (max-width: 768px) {
  .flashcard-controls {
    flex-direction: column;
    align-items: stretch;
  }
  
  .flashcard-buttons {
    justify-content: center;
  }
  
  .flashcard {
    height: 200px;
  }
  
  .word {
    font-size: 1.5rem;
  }
  
  .turkish {
    font-size: 1.25rem;
  }
}

/* Responsive Design */
@media (max-width: 768px) {
  .container { 
    padding: 1rem; 
  }
  
  .upload-card { 
    padding: 1.5rem; 
  }
  
  .button-group { 
    flex-direction: column; 
  }
  
  .btn { 
    width: 100%; 
  }

  .quiz-header {
    flex-direction: column;
    gap: 1rem;
  }

  .quiz-navigation {
    flex-direction: column;
  }

  .results-actions {
    flex-direction: column;
  }

  .toast {
    min-width: auto;
    width: calc(100vw - 40px);
  }

  .tab-buttons {
    flex-direction: column;
  }

  .tab-btn {
    border-right: none;
    border-bottom: 1px solid var(--border);
  }

  .tab-btn:last-child {
    border-bottom: none;
  }

  .prompt-text {
    font-size: 0.75rem;
  }
}

/* Home Section Styles */
.hero-section {
  text-align: center;
  padding: 5rem 0;
  background: linear-gradient(135deg, #3b82f6 0%, #6366f1 30%, #8b5cf6 70%, #a855f7 100%);
  color: white;
  margin: 0;
  position: relative;
  overflow: hidden;
}

.hero-section::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: radial-gradient(circle at 30% 20%, rgba(255,255,255,0.1) 0%, transparent 50%),
              radial-gradient(circle at 70% 80%, rgba(255,255,255,0.05) 0%, transparent 50%);
  animation: pulse 4s ease-in-out infinite;
}

@keyframes pulse {
  0%, 100% { opacity: 1; }
  50% { opacity: 0.7; }
}

.hero-section::after {
  content: '';
  position: absolute;
  bottom: -1px;
  left: 0;
  right: 0;
  height: 150px;
  background: linear-gradient(180deg, 
    rgba(139,92,246,0.7) 0%, 
    rgba(99,102,241,0.4) 25%, 
    rgba(99,102,241,0.2) 50%, 
    rgba(99,102,241,0.08) 75%, 
    transparent 100%);
  z-index: 1;
  filter: blur(2px);
}

.hero-title {
  font-size: 4rem;
  font-weight: 900;
  margin-bottom: 1.5rem;
  background: linear-gradient(45deg, #ffffff, #f8fafc, #e0e7ff);
  background-clip: text;
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  text-shadow: 0 4px 8px rgba(0,0,0,0.3);
  position: relative;
  z-index: 2;
  animation: titleGlow 3s ease-in-out infinite;
}

@keyframes titleGlow {
  0%, 100% { filter: drop-shadow(0 0 10px rgba(255,255,255,0.3)); }
  50% { filter: drop-shadow(0 0 20px rgba(255,255,255,0.5)); }
}

.hero-subtitle {
  font-size: 1.4rem;
  margin-bottom: 3rem;
  opacity: 0.95;
  text-shadow: 0 2px 4px rgba(0,0,0,0.2);
  position: relative;
  z-index: 2;
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.hero-features {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
  margin-bottom: 3rem;
  max-width: 900px;
  margin-left: auto;
  margin-right: auto;
  position: relative;
  z-index: 5;
}

.feature-item {
  background: rgba(255, 255, 255, 0.15);
  padding: 2rem;
  border-radius: var(--radius);
  backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.3);
  transition: all 0.2s ease;
  position: relative;
  z-index: 5;
}

.feature-item:hover {
  background: rgba(255, 255, 255, 0.2);
  transform: translateY(-2px);
}

.feature-icon {
  font-size: 3rem;
  margin-bottom: 1rem;
}

.feature-item h3 {
  font-size: 1.25rem;
  font-weight: 600;
  margin-bottom: 0.5rem;
}

.feature-item p {
  opacity: 0.9;
  line-height: 1.6;
}

.hero-actions {
  display: flex;
  gap: 1rem;
  justify-content: center;
  flex-wrap: wrap;
  position: relative;
  z-index: 10;
}

.btn-large {
  padding: 1rem 2rem;
  font-size: 1.1rem;
  min-width: 180px;
  position: relative;
  z-index: 10;
  background: linear-gradient(135deg, var(--primary), #6366f1, #8b5cf6);
  border: none;
  border-radius: 12px;
  color: white;
  font-weight: 600;
  cursor: pointer;
  transition: all 0.3s ease;
  box-shadow: 0 8px 25px rgba(99,102,241,0.3);
}

.btn-large:hover {
  transform: translateY(-3px) scale(1.05);
  box-shadow: 0 15px 40px rgba(99,102,241,0.4);
}

.stats-section {
  padding: 6rem 2rem 3rem 2rem;
  background: transparent;
  position: relative;
  z-index: 2;
}

.stats-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 2rem;
}

.stat-item {
  text-align: center;
  padding: 2rem;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.stat-number {
  font-size: 3rem;
  font-weight: 800;
  color: var(--primary);
  margin-bottom: 0.5rem;
}

.stat-label {
  font-size: 1.2rem;
  color: var(--text);
  font-weight: 700;
  margin-bottom: 1rem;
}

/* About Section Styles */

.team-section, .mission-section, .vision-section, .contact-section {
  margin-bottom: 4rem;
  position: relative;
  z-index: 2;
}

.team-section h2, .mission-section h2, .vision-section h2, .contact-section h2 {
  font-size: 2rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 2rem;
  text-align: center;
}

.founders-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
  gap: 3rem;
  margin-top: 2rem;
}

.founder-card {
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 2rem;
  box-shadow: var(--shadow);
  text-align: center;
  transition: all 0.2s ease;
}

.founder-card:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
}

/* Contact Links */
.founder-contact {
  display: flex;
  flex-direction: column;
  gap: 0.75rem;
  margin-top: 1.5rem;
  padding-top: 1.5rem;
  border-top: 1px solid var(--border);
}

.contact-link {
  display: flex;
  align-items: center;
  gap: 0.75rem;
  padding: 0.75rem 1rem;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: 8px;
  color: var(--text);
  text-decoration: none;
  font-size: 0.9rem;
  font-weight: 500;
  transition: all 0.3s ease;
}

.contact-link:hover {
  background: var(--primary);
  color: white;
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(59,130,246,0.25);
}

.contact-link svg {
  flex-shrink: 0;
}

/* Stats Section Enhancements */
.stat-item {
  text-align: center;
  padding: 2.5rem;
  background: var(--bg-card);
  border-radius: 20px;
  border: 2px solid var(--border);
  box-shadow: var(--shadow);
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.stat-item::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(99,102,241,0.1), transparent);
  transition: left 0.6s ease;
}

.stat-item:hover::before {
  left: 100%;
}

.stat-item:hover {
  transform: translateY(-6px);
  box-shadow: var(--shadow-lg);
  border-color: var(--primary);
}

.stat-infinity {
  font-size: 4.5rem;
  font-family: 'Inter', Arial, sans-serif;
  font-weight: 300;
  letter-spacing: -0.05em;
}

.stat-description {
  font-size: 0.95rem;
  color: var(--text-light);
  line-height: 1.6;
  margin-top: 1rem;
}

/* Dark theme fixes */
.dark-theme .stat-item {
  background: var(--bg-card);
  border-color: var(--border);
}

.dark-theme .contact-link {
  background: var(--bg-card);
  border-color: var(--border);
}

.dark-theme .contact-link:hover {
  background: var(--primary);
  color: white;
}

/* Contact Section Styling */
.contact-info {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
  gap: 1.5rem;
  margin: 2rem 0;
}

.contact-item {
  display: flex;
  align-items: center;
  gap: 1rem;
  padding: 1.5rem;
  background: var(--bg-card);
  border: 1px solid var(--border);
  border-radius: 12px;
  transition: all 0.3s ease;
}

.contact-item:hover {
  transform: translateY(-2px);
  box-shadow: var(--shadow-lg);
  border-color: var(--primary);
}

.contact-icon {
  font-size: 2rem;
  width: 3rem;
  height: 3rem;
  display: flex;
  align-items: center;
  justify-content: center;
  background: linear-gradient(135deg, var(--primary), #8b5cf6);
  border-radius: 50%;
  flex-shrink: 0;
}

.contact-details h4 {
  margin: 0 0 0.5rem 0;
  color: var(--text);
  font-weight: 600;
}

.contact-details a {
  color: var(--primary);
  text-decoration: none;
  font-weight: 500;
}

.contact-details a:hover {
  text-decoration: underline;
}

.contact-details p {
  margin: 0.5rem 0 0 0;
  font-size: 0.85rem;
  color: var(--text-light);
}

.contact-note {
  display: flex;
  align-items: flex-start;
  gap: 1rem;
  margin-top: 3rem;
  padding: 2rem;
  background: linear-gradient(135deg, var(--bg), rgba(99,102,241,0.05));
  border: 1px solid var(--border);
  border-radius: 16px;
  border-left: 4px solid var(--primary);
}

.note-icon {
  font-size: 1.5rem;
  flex-shrink: 0;
  margin-top: 0.25rem;
}

.note-content p {
  margin: 0;
  line-height: 1.6;
  color: var(--text);
}

.dark-theme .hero-section {
  background: linear-gradient(135deg, #1e40af 0%, #3730a3 30%, #4338ca 70%, #6d28d9 100%);
}

.dark-theme .section-header {
  background: linear-gradient(135deg, #1e40af 0%, #3730a3 50%, #4338ca 100%);
}

.founder-avatar {
  position: relative;
  margin-bottom: 1.5rem;
  display: inline-block;
}

.avatar-icon {
  font-size: 4rem;
  margin-bottom: 0.5rem;
}

.gender-symbol {
  position: absolute;
  top: -10px;
  right: -10px;
  width: 30px;
  height: 30px;
  border-radius: 50%;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 1.2rem;
  font-weight: bold;
  color: white;
}

.gender-symbol.male {
  background: linear-gradient(45deg, #3b82f6, #1d4ed8);
}

.gender-symbol.female {
  background: linear-gradient(45deg, #ec4899, #be185d);
}

.founder-info h3 {
  font-size: 1.5rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 0.5rem;
}

.founder-role {
  font-size: 1rem;
  color: var(--primary);
  font-weight: 500;
  margin-bottom: 1rem;
}

.founder-description {
  color: var(--text-light);
  line-height: 1.6;
}

.mission-content {
  display: grid;
  gap: 2rem;
}

.mission-item {
  display: flex;
  gap: 1.5rem;
  align-items: flex-start;
  padding: 2rem;
  background: var(--bg);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}

.mission-icon {
  font-size: 2.5rem;
  flex-shrink: 0;
}

.mission-text h3 {
  font-size: 1.25rem;
  font-weight: 600;
  color: var(--text);
  margin-bottom: 0.5rem;
}

.mission-text p {
  color: var(--text-light);
  line-height: 1.6;
}

.vision-text {
  font-size: 1.1rem;
  color: var(--text-light);
  line-height: 1.8;
  margin-bottom: 1.5rem;
  text-align: center;
  max-width: 800px;
  margin-left: auto;
  margin-right: auto;
}

.contact-section {
  text-align: center;
  background: var(--bg-light);
  padding: 3rem;
  border-radius: var(--radius);
  border: 1px solid var(--border);
}

.contact-section p {
  font-size: 1.1rem;
  color: var(--text-light);
  margin-bottom: 2rem;
}

.contact-note {
  background: var(--bg);
  padding: 1.5rem;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  display: inline-block;
}

.contact-note p {
  margin: 0;
  color: var(--text);
  font-size: 0.95rem;
}

/* Enhanced Responsive Design */
@media (max-width: 768px) {
  .main-nav {
    flex-wrap: wrap;
    gap: 0.5rem;
  }
  
  .nav-btn {
    font-size: 0.85rem;
    padding: 0.5rem 0.75rem;
    min-width: auto;
  }
  
  .nav-btn svg {
    width: 16px;
    height: 16px;
  }
  
  .hero-title {
    font-size: 2rem;
  }
  
  .hero-subtitle {
    font-size: 1rem;
  }
  
  .hero-features {
    grid-template-columns: 1fr;
    gap: 1rem;
  }
  
  .feature-item {
    padding: 1.5rem;
  }
  
  .hero-actions {
    flex-direction: column;
    align-items: center;
  }
  
  .btn-large {
    width: 100%;
    max-width: 280px;
  }
  
  .stats-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 1rem;
  }
  
  .stat-item {
    padding: 1.5rem 1rem;
  }
  
  .stat-number {
    font-size: 2rem;
  }
  
  .founders-grid {
    grid-template-columns: 1fr;
    gap: 2rem;
  }
  
  .mission-item {
    flex-direction: column;
    text-align: center;
    gap: 1rem;
  }
  
  .about-header h1 {
    font-size: 2rem;
  }
  
  .contact-section {
    margin: 0 -1rem;
    border-radius: 0;
  }
}

@media (max-width: 480px) {
  .container {
    padding: 1rem 0.5rem;
  }
  
  .hero-section {
    padding: 2rem 1rem;
    margin: -1rem -0.5rem 2rem -0.5rem;
  }
  
  .hero-title {
    font-size: 1.75rem;
  }
  
  .stats-grid {
    grid-template-columns: 1fr;
  }
  
  .nav-btn span:not(.nav-btn svg) {
    display: none;
  }
  
  .app-header {
    padding: 1rem 0.5rem;
  }
  
  .header-content {
    flex-direction: column;
    gap: 1rem;
  }
  
  .logo h1 {
    font-size: 1.25rem;
  }
  
  .main-nav {
    order: -1;
    width: 100%;
    justify-content: center;
  }
}
    </style>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>🎓</text></svg>">
</head>
<body class="light-theme">
    <!-- Theme Toggle -->
    <button class="theme-toggle" id="themeToggle" aria-label="Toggle dark mode">
        <span class="sun-icon">☀️</span>
        <span class="moon-icon">🌙</span>
    </button>

    <!-- Main Container -->
    <div class="app-container">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <div class="logo">
                    <div class="logo-icon">🎓</div>
                    <h1>AI Destekli Quiz</h1>
                </div>
                <nav class="main-nav">
                    <button class="nav-btn active" data-section="home" id="homeNavBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <circle cx="12" cy="12" r="3"/>
                            <path d="M8.56 2.75c4.37 6.03 6.02 9.42 8.44 17.5"/>
                            <path d="M15.44 2.75c-4.37 6.03-6.02 9.42-8.44 17.5"/>
                        </svg>
                        Ana Sayfa
                    </button>
                    <button class="nav-btn" data-section="upload" id="quizNavBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"/>
                            <line x1="12" y1="17" x2="12.01" y2="17"/>
                        </svg>
                        Quiz
                    </button>
                    <button class="nav-btn" data-section="flashcard" id="flashcardNavBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M19 7V4a1 1 0 0 0-1-1H5a2 2 0 0 0 0 4h15a1 1 0 0 1 1 1v4h-3a2 2 0 0 0 0 4h3a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1"/>
                            <path d="M11 6 9 12l2 6"/>
                            <path d="M13 6l2 6-2 6"/>
                        </svg>
                        Flashcard
                    </button>
                    <button class="nav-btn" data-section="placement" id="placementNavBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                        </svg>
                        Seviye Tespit
                    </button>
                    <button class="nav-btn" data-section="about" id="aboutNavBtn">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                            <circle cx="9" cy="7" r="4"/>
                            <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                            <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
                        </svg>
                        Hakkımızda
                    </button>
                </nav>
                <div class="header-info">
                    <span class="mode-indicator" id="modeIndicator">Ana Sayfa</span>
                </div>
            </div>
        </header>

        <!-- Home Section -->
        <section class="section home-section active" id="homeSection">
            <div class="container">
                <div class="hero-section">
                    <div class="hero-content">
                        <h1 class="hero-title">AI Destekli Quiz Platformu</h1>
                        <p class="hero-subtitle">ChatGPT ile güçlendirilmiş akıllı quiz ve flashcard sistemi. Kişiselleştirilmiş öğrenme deneyimi, anında geri bildirim ve detaylı performans analizi ile İngilizce seviyenizi hızla geliştirin.</p>
                        <div class="hero-features">
                            <div class="feature-item">
                                <div class="feature-icon">🎯</div>
                                <h3>Akıllı Quiz Sistemi</h3>
                                <p>İngilizce seviyenizi test edecek çeşitli kategorilerde adaptif quiz deneyimi</p>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">📚</div>
                                <h3>İnteraktif Flashcard'lar</h3>
                                <p>Etkili kelime öğrenimi için tasarlanmış modern flashcard sistemi</p>
                            </div>
                            <div class="feature-item">
                                <div class="feature-icon">🤖</div>
                                <h3>ChatGPT Entegrasyonu</h3>
                                <p>AI destekli hata analizi ve kişiselleştirilmiş öğrenme önerileri</p>
                            </div>
                        </div>
                        <div class="hero-actions">
                            <button class="btn btn-primary btn-large hero-cta-primary" data-section="upload">
                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <polygon points="5,3 19,12 5,21"/>
                                </svg>
                                Quiz'e Başla
                                <span class="btn-shine"></span>
                            </button>
                            <button class="btn btn-secondary btn-large hero-cta-secondary" data-section="flashcard">
                                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <path d="M9 9h6v6H9z"/>
                                </svg>
                                Flashcard Çalış
                                <span class="btn-shine"></span>
                            </button>
                        </div>
                    </div>
                </div>
                
                <div class="stats-section">
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-number stat-infinity">∞</div>
                            <div class="stat-label">Sınırsız Quiz</div>
                            <div class="stat-description">İstediğiniz kadar quiz oluşturun ve çözün. Hiçbir sınırlama olmadan öğrenmeye devam edin!</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">100%</div>
                            <div class="stat-label">Ücretsiz</div>
                            <div class="stat-description">Platform tamamen ücretsiz! Kayıt olmaya, ödeme yapmaya gerek yok. Hemen kullanmaya başlayın.</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">Erişim</div>
                            <div class="stat-description">İstediğiniz zaman, istediğiniz yerden çalışın. Mobil uyumlu tasarım ile her cihazda kullanın.</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">AI</div>
                            <div class="stat-label">Destekli</div>
                            <div class="stat-description">Yapay zeka destekli hata analizi ile güçlü yanlarınızı keşfedin ve gelişim alanlarınızı belirleyin.</div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Upload Section -->
        <section class="section upload-section" id="uploadSection">
            <div class="container">
                <div class="section-header">
                    <div class="section-icon">📝</div>
                    <h1 class="section-title">Quiz Oluştur</h1>
                    <p class="section-subtitle">ChatGPT'den aldığınız JSON formatındaki quiz verisini yapıştırın. Reading, Grammar, Vocabulary ve karma quiz türleri desteklenir.</p>
                </div>
                
                <div class="upload-card">

                    <div class="upload-form">
                        <label for="jsonInput" class="input-label">
                            JSON Quiz Verisi 
                            <span class="required">*</span>
                        </label>
                        <div class="textarea-container">
                            <textarea 
                                id="jsonInput" 
                                class="json-textarea" 
                                placeholder="Örnek JSON formatı:
{
  &quot;type&quot;: &quot;Grammar&quot;,
  &quot;title&quot;: &quot;İngilizce Gramer Testi&quot;,
  &quot;description&quot;: &quot;İngilizce gramer bilginizi test edin&quot;,
  &quot;questions&quot;: [
    {
      &quot;id&quot;: 1,
      &quot;question&quot;: &quot;Hangi cümle doğru gramere sahiptir?&quot;,
      &quot;options&quot;: [
        &quot;She don&apos;t like coffee&quot;,
        &quot;She doesn&apos;t like coffee&quot;, 
        &quot;She not like coffee&quot;,
        &quot;She no like coffee&quot;
      ],
      &quot;correct&quot;: 1,
      &quot;explanation&quot;: &quot;Üçüncü tekil şahıs için doesn&apos;t kullanın.&quot;
    }
  ]
}"
                                spellcheck="false"
                            ></textarea>
                            <div class="textarea-indicator">
                                <span id="charCount">0</span> karakter
                            </div>
                        </div>

                        <!-- Validation Result -->
                        <div class="validation-result" id="validationResult" style="display: none;">
                            <div class="validation-icon">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20,6 9,17 4,12"/>
                                </svg>
                            </div>
                            <div class="validation-content">
                                <strong>JSON doğrulandı!</strong>
                                <span id="validationDetails"></span>
                            </div>
                        </div>

                        <!-- Action Buttons -->
                        <div class="button-group">
                            <button class="btn btn-secondary" id="validateBtn">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polyline points="20,6 9,17 4,12"/>
                                </svg>
                                JSON Doğrula
                            </button>
                            <button class="btn btn-primary" id="startQuizBtn" disabled>
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <polygon points="5,3 19,12 5,21"/>
                                </svg>
                                Quiz'e Başla
                            </button>
                        </div>
                    </div>
                </div>

                <!-- Feature Tabs -->
                <div class="feature-tabs">
                    <div class="tab-buttons">
                        <button class="tab-btn active" data-tab="features">🌟 Özellikler</button>
                        <button class="tab-btn" data-tab="examples">📝 Örnek Promptlar</button>
                        <button class="tab-btn" data-tab="tips">💡 İpuçları</button>
                    </div>

                    <!-- Features Tab -->
                    <div class="tab-content active" id="features-tab">
                        <h3>Platform Özellikleri</h3>
                        <ul>
                            <li>✨ Modern ve responsive tasarım</li>
                            <li>⏱️ Zamanlayıcı ile quiz deneyimi</li>
                            <li>📊 Detaylı sonuç analizi</li>
                            <li>🎯 ChatGPT koçluk desteği</li>
                            <li>📖 Reading passage otomatik algılama</li>
                            <li>⌨️ Keyboard shortcuts (1-5, ok tuşları)</li>
                            <li>🌙 Karanlık mod desteği</li>
                            <li>📱 Mobil uyumlu arayüz</li>
                        </ul>
                    </div>

                    <!-- Examples Tab -->
                    <div class="tab-content" id="examples-tab">
                        <h3>ChatGPT İçin Özelleştirilmiş Prompt Üretici</h3>
                        
                        <!-- Prompt Generator -->
                        <div class="prompt-generator">
                            <div class="generator-header">
                                <h4>🎯 Kişiselleştirilmiş Quiz Prompt Üretici</h4>
                                <button class="reset-prompt-btn" id="resetPromptBtn" aria-label="Prompt'u Sıfırla" style="display: none;">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                                        <path d="M3 3v5h5"/>
                                    </svg>
                                    Sıfırla
                                </button>
                            </div>
                            <div class="generator-form">
                                <div class="form-row">
                                    <div class="form-group">
                                        <label for="quizTopic">Quiz Konusu:</label>
                                        <select id="quizTopic">
                                            <option value="karma">Karma (Reading + Grammar + Vocabulary)</option>
                                            <option value="reading">Reading Comprehension</option>
                                            <option value="grammar">Grammar & Structure</option>
                                            <option value="vocabulary">Vocabulary & Meaning</option>
                                            <option value="sentence">Sentence Completion</option>
                                            <option value="phrasal">Phrasal Verbs</option>
                                            <option value="idioms">Idioms & Expressions</option>
                                            <option value="academic">Academic Vocabulary</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="questionCount">Soru Sayısı:</label>
                                        <select id="questionCount">
                                            <option value="10">10 Soru</option>
                                            <option value="15">15 Soru</option>
                                            <option value="20" selected>20 Soru</option>
                                            <option value="25">25 Soru</option>
                                            <option value="30">30 Soru</option>
                                        </select>
                                    </div>
                                    <div class="form-group">
                                        <label for="difficulty">Zorluk Seviyesi:</label>
                                        <select id="difficulty">
                                            <option value="orta">Orta Seviye</option>
                                            <option value="ileri" selected>İleri Seviye</option>
                                            <option value="expert">Expert Seviye</option>
                                        </select>
                                    </div>
                                </div>
                                <button class="btn btn-primary" id="generatePrompt">
                                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
                                    </svg>
                                    Prompt Üret
                                </button>
                            </div>
                            <div class="generated-prompt" id="generatedPrompt" style="display: none;">
                                <h5>Üretilen Prompt:</h5>
                                <div class="prompt-text" id="generatedPromptText" onclick="copyToClipboard(this)"></div>
                                <small>Tıklayarak kopyala</small>
                            </div>
                        </div>

                        <!-- Pre-made Examples -->
                        <div class="example-prompts">
                            <h4>🏆 Hazır Quiz Promptları</h4>
                            
                            <div class="example-prompt">
                                <h5>📚 Reading Comprehension Quiz</h5>
                                <div class="prompt-text" onclick="copyToClipboard(this)">
ChatGPT, bana reading comprehension quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "Reading Comprehension Test",
  "type": "Reading",
  "passage": "Passage metni buraya (300-400 kelime)",
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"],
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

10 soru, ileri seviyede.
- Akademik/bilimsel passage
- Main idea, detail, inference soruları
- Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.
                                </div>
                                <small>Tıklayarak kopyala</small>
                            </div>

                            <div class="example-prompt">
                                <h5>📝 Grammar & Structure Quiz</h5>
                                <div class="prompt-text" onclick="copyToClipboard(this)">
ChatGPT, bana grammar quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "Grammar ve Structure Quiz",
  "type": "Grammar",
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"],
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

15 soru, ileri seviyede.
Konular: Conditional sentences, Passive voice, Reported speech, Modal verbs.
Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.
                                </div>
                                <small>Tıklayarak kopyala</small>
                            </div>

                            <div class="example-prompt">
                                <h5>💡 Vocabulary Master Quiz</h5>
                                <div class="prompt-text" onclick="copyToClipboard(this)">
ChatGPT, bana vocabulary quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "Advanced Vocabulary Quiz",
  "type": "Vocabulary", 
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"],
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

20 soru, ileri seviyede.
- Academic vocabulary, synonyms, context-based meaning
- Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.
                                </div>
                                <small>Tıklayarak kopyala</small>
                            </div>
                        </div>
                    </div>

                    <!-- Tips Tab -->
                    <div class="tab-content" id="tips-tab">
                        <h3>Platform Kullanım İpuçları</h3>
                        <div class="tip-item">
                            <h4>📖 Reading Passage Otomatik Algılama</h4>
                            <p>JSON'unuzda "passage" alanı varsa veya "type": "reading" belirtirseniz, paragraf otomatik olarak soruların üstünde sabit kalır.</p>
                        </div>
                        <div class="tip-item">
                            <h4>🏆 Quiz Türleri</h4>
                            <p>"type": "Reading", "Grammar", "Vocabulary" gibi türler belirttiğinizde sistem otomatik olarak quiz formatını algılar ve uygun şekilde görüntüler.</p>
                        </div>
                        <div class="tip-item">
                            <h4>⌨️ Klavye Kısayolları</h4>
                            <p>1-5 tuşları ile seçenekleri işaretleyin, ok tuşlarıyla sorular arasında gezinin. Enter ile son soruda quiz'i bitirin.</p>
                        </div>
                        <div class="tip-item">
                            <h4>🎯 ChatGPT Koçluk Sistemi</h4>
                            <p>Quiz sonunda "ChatGPT Koçluk Metni Kopyala" butonuna basın. Sistem yanlış cevaplarınızı analiz edip detaylı koçluk metni hazırlar. ChatGPT'ye yapıştırarak kişisel öneriler alın.</p>
                        </div>
                        <div class="tip-item">
                            <h4>⏱️ Akıllı Zamanlayıcı</h4>
                            <p>Her soru için 30 saniye. Seçenek işaretlemek timer'ı sıfırlamaz, sadece soru değişiminde resetlenir. Süre dolunca otomatik geçiş.</p>
                        </div>
                        <div class="tip-item">
                            <h4>📱 Tam Responsive Tasarım</h4>
                            <p>Telefon, tablet ve bilgisayarda optimum deneyim. Dark/Light tema desteği ve touch-friendly arayüz.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Flashcard Section -->
        <section class="section flashcard-section" id="flashcardSection">
            <div class="container">
                <div class="section-header">
                    <div class="section-icon">🃏</div>
                    <h1 class="section-title">İnteraktif Flashcard'lar</h1>
                    <p class="section-subtitle">ChatGPT'den aldığınız kelime listelerini yapıştırarak etkili öğrenme için interaktif flashcard'lara dönüştürün</p>
                </div>

                <div class="flashcard-input">
                    <div class="input-section">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <label for="vocabularyInput">ChatGPT'den Kelime Listesi:</label>
                            <button class="btn btn-success btn-sm" id="quickDemo" style="font-size: 0.8rem; padding: 0.5rem 1rem;">
                                ⚡ Hızlı Demo
                            </button>
                        </div>
                        <textarea 
                            id="vocabularyInput" 
                            placeholder="📝 Desteklenen formatlar:

1) Basit format:
achieve - başarmak - to successfully complete something
abundant - bol, zengin - existing in large quantities
acquire - elde etmek - to get or obtain something

2) ChatGPT formatı:
**achieve** - başarmak
Definition: to successfully complete something

3) JSON format:
[
  {&quot;word&quot;: &quot;achieve&quot;, &quot;turkish&quot;: &quot;başarmak&quot;, &quot;definition&quot;: &quot;to successfully complete something&quot;}
]

4) Numaralı liste:
1. achieve - başarmak - to successfully complete something
2. abundant - bol, zengin - existing in large quantities

Herhangi bir format kullanabilirsiniz, sistem otomatik algılar!"
                        ></textarea>
                        <div class="flashcard-actions">
                            <button class="btn btn-primary btn-enhanced" id="createFlashcards">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                                    <path d="M9 9h6v6H9z"/>
                                </svg>
                                Flashcard Oluştur
                            </button>
                            <button class="btn btn-success btn-enhanced" id="demoFlashcards">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z"/>
                                </svg>
                                Demo Dene
                            </button>
                            <button class="btn btn-secondary btn-enhanced" id="clearFlashcards">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M3 6h18"/>
                                    <path d="M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6"/>
                                    <path d="M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2"/>
                                </svg>
                                Temizle
                            </button>
                        </div>
                    </div>
                </div>

                <div class="flashcard-container" id="flashcardContainer" style="display: none;">
                    <div class="flashcard-controls">
                        <div class="flashcard-info">
                            <span id="currentCard">1</span> / <span id="totalCards">0</span>
                        </div>
                        <div class="flashcard-buttons">
                            <button class="btn btn-secondary btn-enhanced flashcard-nav-btn" id="prevCard" disabled>
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <polyline points="15,18 9,12 15,6"/>
                                </svg>
                                Önceki
                            </button>
                            <button class="btn btn-primary btn-enhanced flashcard-flip-btn" id="flipCard">
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                                    <path d="M3 3v5h5"/>
                                </svg>
                                Çevir
                            </button>
                            <button class="btn btn-secondary btn-enhanced flashcard-nav-btn" id="nextCard">
                                Sonraki
                                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                    <polyline points="9,18 15,12 9,6"/>
                                </svg>
                            </button>
                        </div>
                        <button class="btn btn-success btn-enhanced" id="shuffleCards">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <path d="M16 3h5v5M4 20L21 3M21 16v5h-5M15 15l6 6M4 4l5 5"/>
                            </svg>
                            Karıştır
                        </button>
                        <button class="btn btn-warning btn-enhanced" id="createQuizFromCards">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                                <path d="M9 11H5a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7a2 2 0 0 0-2-2h-4"/>
                                <path d="M9 7V3a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v4"/>
                                <line x1="12" y1="11" x2="12" y2="17"/>
                                <line x1="8" y1="14" x2="16" y2="14"/>
                            </svg>
                            Quiz Yap
                        </button>
                    </div>

                    <div class="flashcard" id="flashcard">
                        <div class="flashcard-inner">
                            <div class="flashcard-front">
                                <div class="word" id="cardWord">achieve</div>
                                <div class="hint">Tıklayın veya "Çevir" butonuna basın</div>
                            </div>
                            <div class="flashcard-back">
                                <div class="turkish" id="cardTurkish">başarmak</div>
                                <div class="definition" id="cardDefinition">to successfully complete something</div>
                            </div>
                        </div>
                    </div>

                    <div class="progress-bar">
                        <div class="progress-fill" id="flashcardProgress"></div>
                    </div>
                </div>

                <!-- Vocabulary Request Helper -->
                <div class="vocab-helper">
                    <h3>ChatGPT'den Kelime Listesi İsteyin</h3>
                    <div class="helper-prompts">
                        <div class="helper-prompt">
                            <h4>📚 Advanced Vocabulary Listesi</h4>
                            <div class="prompt-text" onclick="copyToClipboard(this)">
ChatGPT, bana advanced level vocabulary listesi hazırlar mısın? 

Format (bu format kullan):
word - türkçe anlamı - english definition

50 kelime olsun ve şu kategorilerden seç:
- Academic vocabulary (AWL)
- Formal/business words  
- Scientific terms
- Advanced adjectives/verbs
- Abstract concepts

Örnek:
achieve - başarmak - to successfully complete something
abundant - bol, zengin - existing in large quantities
acquire - elde etmek - to get or obtain something
                            </div>
                            <small>Tıklayarak kopyala</small>
                        </div>
                        
                        <div class="helper-prompt">
                            <h4>🔤 Zor Kelimeler & Synonyms</h4>
                            <div class="prompt-text" onclick="copyToClipboard(this)">
ChatGPT, İngilizce'de en zor kelimelerden 30 tanesini ver. 

Format (bu format kullan):
word - türkçe anlamı - english definition

Kelimeler şunlardan olsun:
- Sık kullanılan advanced vocabulary
- Academic word list (AWL) 
- Formal/academic writing words
- Abstract concepts & complex ideas

Örnek:
phenomenon - olgu, fenomen - a fact or situation that is observed to exist
inevitable - kaçınılmaz - certain to happen; unavoidable
comprehensive - kapsamlı - complete and including everything
                            </div>
                            <small>Tıklayarak kopyala</small>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Quiz Section -->
        <section class="section quiz-section" id="quizSection">
            <div class="container">
                <div class="section-header">
                    <div class="section-icon">🎯</div>
                    <h1 class="section-title">Quiz Çöz</h1>
                    <p class="section-subtitle">Hazırladığınız quiz'i çözün, sürenizi takip edin ve detaylı analiz alın</p>
                </div>
                
                <div class="quiz-header">
                    <div class="quiz-progress">
                        <div class="progress-info">
                            <span id="currentQuestion">1</span> / <span id="totalQuestions">10</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="progressFill"></div>
                        </div>
                        <div class="progress-percentage" id="progressPercentage">10%</div>
                    </div>
                    <div class="quiz-timer">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"/>
                            <polyline points="12,6 12,12 16,14"/>
                        </svg>
                        <span id="timerDisplay">30</span>
                    </div>
                </div>

                <div class="quiz-card">
                    <!-- Reading Passage (for reading questions) -->
                    <div class="reading-passage" id="readingPassage" style="display: none;">
                        <h3>Reading Passage</h3>
                        <div class="passage-content" id="passageContent"></div>
                    </div>

                    <div class="question-container">
                        <h2 class="question-text" id="questionText">Soru yükleniyor...</h2>
                    </div>

                    <div class="options-container" id="optionsContainer">
                        <!-- Options will be dynamically generated -->
                    </div>

                    <div class="quiz-navigation">
                        <button class="btn btn-secondary" id="prevBtn" disabled>
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="15,18 9,12 15,6"/>
                            </svg>
                            Önceki
                        </button>
                        <button class="btn btn-primary" id="nextBtn" disabled>
                            Sonraki
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9,18 15,12 9,6"/>
                            </svg>
                        </button>
                        <button class="btn btn-success" id="finishBtn" style="display: none;">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20,6 9,17 4,12"/>
                            </svg>
                            Bitir
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Results Section -->
        <section class="section results-section" id="resultsSection">
            <div class="container">
                <div class="results-header">
                    <div class="trophy-animation">🏆</div>
                    <h2>Quiz Tamamlandı!</h2>
                    <p>Performansınızı aşağıda görebilirsiniz</p>
                </div>

                <div class="results-grid">
                    <div class="result-card">
                        <div class="result-icon">📊</div>
                        <div class="result-value" id="scoreValue">0</div>
                        <div class="result-label">Doğru Cevap</div>
                    </div>
                    <div class="result-card">
                        <div class="result-icon">📈</div>
                        <div class="result-value" id="percentageValue">0%</div>
                        <div class="result-label">Başarı Oranı</div>
                    </div>
                    <div class="result-card">
                        <div class="result-icon">⏱️</div>
                        <div class="result-value" id="timeValue">0:00</div>
                        <div class="result-label">Toplam Süre</div>
                    </div>
                </div>

                <div class="results-actions">
                    <button class="btn btn-primary btn-enhanced results-export-btn" id="exportBtn">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"/>
                            <path d="M12 12l4-4m0 0l-4-4m4 4H8"/>
                        </svg>
                        ChatGPT Koçluk Metni Kopyala
                    </button>
                    <button class="btn btn-secondary btn-enhanced results-restart-btn" id="restartBtn">
                        <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                            <path d="M3 3v5h5"/>
                        </svg>
                        Yeni Quiz
                    </button>
                </div>

                <div class="detailed-results" id="detailedResults">
                    <!-- Detailed results will be populated here -->
                </div>
            </div>
        </section>

        <!-- Placement Test Section -->
        <section class="section placement-section" id="placementSection">
            <div class="container">
                <div class="section-header">
                    <div class="section-icon">🎯</div>
                    <h1 class="section-title">İngilizce Seviye Tespit Sınavı</h1>
                    <p class="section-subtitle">CEFR standartlarına göre İngilizce seviyenizi belirleyin. Kapsamlı 60 soruluk değerlendirme ile gerçek seviyenizi keşfedin.</p>
                </div>

                <!-- Test Info Cards -->
                <div class="test-info-grid">
                    <div class="info-card">
                        <div class="info-icon">📊</div>
                        <h3>60 Soru</h3>
                        <p>Grammar, Vocabulary, Reading, Cloze ve Word Matching bölümlerinden</p>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">⏱️</div>
                        <h3>60 Dakika</h3>
                        <p>Her soru için ortalama 1 dakika süre</p>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">🏆</div>
                        <h3>CEFR Sertifikası</h3>
                        <p>A1, A2, B1, B2, C1, C2 seviye belirleme</p>
                    </div>
                    <div class="info-card">
                        <div class="info-icon">📈</div>
                        <h3>Detaylı Analiz</h3>
                        <p>Güçlü ve zayıf yönlerinizin analizi</p>
                    </div>
                </div>

                <!-- Test Instructions -->
                <div class="test-instructions">
                    <h2>Sınav Hakkında</h2>
                    <div class="instruction-grid">
                        <div class="instruction-item">
                            <div class="instruction-number">1</div>
                            <div class="instruction-content">
                                <h3>Sınav Yapısı</h3>
                                <p>60 sorudan oluşan bu test 5 farklı bölümden oluşur: Grammar (15), Vocabulary (15), Cloze (10), Reading (10), Word Matching (10)</p>
                            </div>
                        </div>
                        <div class="instruction-item">
                            <div class="instruction-number">2</div>
                            <div class="instruction-content">
                                <h3>Puanlama Sistemi</h3>
                                <p>Her doğru cevap 1 puan. Yanlış cevaplar için eksi puan yok. Toplam puanınız seviyenizi belirler.</p>
                            </div>
                        </div>
                        <div class="instruction-item">
                            <div class="instruction-number">3</div>
                            <div class="instruction-content">
                                <h3>Seviye Belirleme</h3>
                                <p>Performansınıza göre A1 (Başlangıç) seviyesinden C2 (Uzman) seviyesine kadar CEFR standartlarında seviyeniz belirlenecek. Seviye kriterleri sürpriz olarak tutulmuştur.</p>
                            </div>
                        </div>
                        <div class="instruction-item">
                            <div class="instruction-number">4</div>
                            <div class="instruction-content">
                                <h3>Sınav Sonrası</h3>
                                <p>Test tamamlandıkında detaylı sonuç raporu ve seviyenize özel çalışma önerileri alacaksınız.</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Start Test Button -->
                <div class="test-start-section">
                    <div class="test-warning">
                        <div class="warning-icon">⚠️</div>
                        <p><strong>Önemli:</strong> Sınav başladıktan sonra tarayıcınızı kapatmayın. Tüm soruları cevaplayarak teste son verin.</p>
                    </div>
                    <button class="btn btn-primary btn-enhanced test-start-btn" id="startPlacementTest">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2.5">
                            <polygon points="5,3 19,12 5,21"/>
                        </svg>
                        Seviye Tespit Sınavını Başlat
                    </button>
                    <p class="test-start-note">Sınav tamamen ücretsizdir ve sonuçlarınız sadece size gösterilir.</p>
                </div>

                <!-- Test Content (Hidden Initially) -->
                <div class="placement-test-content" id="placementTestContent" style="display: none;">
                    <div class="test-container">
                    <div class="test-header">
                        <div class="test-progress">
                            <div class="progress-bar">
                                <div class="progress-fill" id="testProgress"></div>
                            </div>
                            <span class="progress-text">
                                Soru <span id="currentTestQuestion">1</span> / <span id="totalTestQuestions">60</span>
                            </span>
                        </div>
                        <div class="test-timer">
                            <div class="timer-icon">⏱️</div>
                            <span id="testTimer">60:00</span>
                        </div>
                    </div>

                    <!-- Question Grid Navigator -->
                    <div class="question-navigator">
                        <div class="navigator-header" style="text-align: center; margin-bottom: 1rem;">
                            <h3 style="margin: 0 0 1rem 0; color: var(--text); font-size: 1.4rem; font-weight: 700;">Soru Navigatörü</h3>
                            <div class="legend" style="display: flex; justify-content: center; gap: 2rem; flex-wrap: wrap; font-size: 0.85rem;">
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <div style="width: 16px; height: 16px; background: linear-gradient(135deg, #f97316 0%, #ea580c 100%); border-radius: 4px; border: 1px solid #f97316;"></div>
                                    <span style="color: var(--text); font-weight: 500;">Mevcut Soru</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <div style="width: 16px; height: 16px; background: linear-gradient(135deg, #10b981 0%, #059669 100%); border-radius: 4px; border: 1px solid #10b981; position: relative;">
                                        <div style="position: absolute; top: -2px; right: -2px; background: #059669; color: white; width: 8px; height: 8px; border-radius: 50%; font-size: 6px; display: flex; align-items: center; justify-content: center; border: 1px solid white;">✓</div>
                                    </div>
                                    <span style="color: var(--text); font-weight: 500;">İşaretlenen</span>
                                </div>
                                <div style="display: flex; align-items: center; gap: 0.5rem;">
                                    <div style="width: 16px; height: 16px; background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 4px;"></div>
                                    <span style="color: var(--text); font-weight: 500;">Boş Bırakılan</span>
                                </div>
                            </div>
                        </div>
                        <div class="question-grid" id="questionGrid">
                            <!-- Question grid will be populated here -->
                        </div>
                    </div>

                    <div class="test-question-container">
                        <div class="question-section" id="currentTestSection"></div>
                        <div class="question-content" id="testQuestionContent">
                            <!-- Question content will be populated here -->
                        </div>
                        <div class="question-options" id="testQuestionOptions">
                            <!-- Options will be populated here -->
                        </div>
                    </div>

                    <div class="test-navigation">
                        <button class="btn btn-secondary btn-enhanced" id="prevTestQuestion" disabled>
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="15,18 9,12 15,6"/>
                            </svg>
                            Önceki
                        </button>
                        <button class="btn btn-primary btn-enhanced" id="nextTestQuestion">
                            Sonraki
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="9,18 15,12 9,6"/>
                            </svg>
                        </button>
                        <button class="btn btn-success btn-enhanced" id="finishPlacementTest" style="display: none;">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <polyline points="20,6 9,17 4,12"/>
                            </svg>
                            Testi Bitir
                        </button>
                    </div>
                    </div>
                </div>

                <!-- Test Results (Hidden Initially) -->
                <div class="placement-results" id="placementResults" style="display: none;">
                    <div class="results-header">
                        <h2>Seviye Tespit Sonuçlarınız</h2>
                        <div class="level-badge" id="levelBadge">
                            <!-- Level will be populated here -->
                        </div>
                    </div>

                    <div class="results-summary">
                        <div class="result-card">
                            <div class="result-icon">📊</div>
                            <div class="result-value" id="testScore">0/60</div>
                            <div class="result-label">Doğru Cevap</div>
                        </div>
                        <div class="result-card">
                            <div class="result-icon">📈</div>
                            <div class="result-value" id="testPercentage">0%</div>
                            <div class="result-label">Başarı Oranı</div>
                        </div>
                        <div class="result-card">
                            <div class="result-icon">⏱️</div>
                            <div class="result-value" id="testDuration">0:00</div>
                            <div class="result-label">Süre</div>
                        </div>
                        <div class="result-card">
                            <div class="result-icon">🎯</div>
                            <div class="result-value" id="cefr-level">-</div>
                            <div class="result-label">CEFR Seviyesi</div>
                        </div>
                    </div>

                    <div class="section-results" id="sectionResults">
                        <!-- Section breakdown will be populated here -->
                    </div>

                    <div class="level-description" id="levelDescription">
                        <!-- Level description will be populated here -->
                    </div>

                    <div class="study-recommendations" id="studyRecommendations">
                        <!-- Study recommendations will be populated here -->
                    </div>

                    <div class="results-actions">
                        <button class="btn btn-primary btn-enhanced" id="retakePlacementTest">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/>
                                <path d="M3 3v5h5"/>
                            </svg>
                            Testi Tekrar Al
                        </button>
                        <button class="btn btn-success btn-enhanced" id="generateStudyPlan">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
                                <polyline points="14,2 14,8 20,8"/>
                                <line x1="16" y1="13" x2="8" y2="13"/>
                                <line x1="16" y1="17" x2="8" y2="17"/>
                                <polyline points="10,9 9,9 8,9"/>
                            </svg>
                            Çalışma Planı Oluştur
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section class="section about-section" id="aboutSection">
            <div class="container">
                <div class="section-header">
                    <div class="section-icon">👥</div>
                    <h1 class="section-title">Hakkımızda</h1>
                    <p class="section-subtitle">AI Destekli Quiz Platformu'nu geliştiren ekibimizle tanışın</p>
                </div>
                
                <div class="team-section">
                    <h2>Kurucular</h2>
                    <div class="founders-grid">
                        <div class="founder-card">
                            <div class="founder-avatar">
                                <div class="avatar-icon">👨‍💻</div>
                                <div class="gender-symbol male">♂</div>
                            </div>
                            <div class="founder-info">
                                <h3>Okan Yaldız</h3>
                                <p class="founder-role">Kurucu & Geliştirici</p>
                                <p class="founder-description">
                                    AI Destekli Quiz Platformu'nun teknik mimarı ve ana geliştiricisi. 
                                    Eğitim teknolojileri ve yapay zeka entegrasyonu konularında uzman.
                                    Platform'un tüm teknik altyapısını ve ChatGPT entegrasyonunu tasarladı.
                                </p>
                            </div>
                        </div>
                        
                        <div class="founder-card">
                            <div class="founder-avatar">
                                <div class="avatar-icon">👩‍🎓</div>
                                <div class="gender-symbol female">♀</div>
                            </div>
                            <div class="founder-info">
                                <h3>Eylül Han</h3>
                                <p class="founder-role">Co-Kurucu & Eğitim Uzmanı</p>
                                <p class="founder-description">
                                    İngilizce eğitimi ve dil öğrenme metodolojileri konularında uzman. 
                                    Platform'un pedagojik yaklaşımını ve içerik stratejisini belirledi.
                                    Quiz formatları ve flashcard sisteminin eğitsel değerini optimize etti.
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="mission-section">
                    <h2>Misyonumuz</h2>
                    <div class="mission-content">
                        <div class="mission-item">
                            <div class="mission-icon">🎯</div>
                            <div class="mission-text">
                                <h3>Kişiselleştirilmiş Öğrenme</h3>
                                <p>Her öğrencinin kendi hızında ve stilinde çalışabilmesi için AI destekli kişiselleştirilmiş öğrenme deneyimi sunuyoruz.</p>
                            </div>
                        </div>
                        
                        <div class="mission-item">
                            <div class="mission-icon">🚀</div>
                            <div class="mission-text">
                                <h3>Teknoloji ve Eğitimin Birleşimi</h3>
                                <p>ChatGPT entegrasyonu ile geleneksel eğitimi modern teknoloji ile harmanlayarak etkili bir öğrenme platformu oluşturduk.</p>
                            </div>
                        </div>
                        
                        <div class="mission-item">
                            <div class="mission-icon">🌟</div>
                            <div class="mission-text">
                                <h3>Ücretsiz ve Erişilebilir Eğitim</h3>
                                <p>Kaliteli YDS hazırlığının herkes için erişilebilir olması gerektiğine inanıyoruz. Platform tamamen ücretsiz ve açık kaynaklı.</p>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="vision-section">
                    <h2>Vizyonumuz</h2>
                    <p class="vision-text">
                        YDS Hazırlık Platformu olarak, Türkiye'deki İngilizce eğitiminin dijital dönüşümüne öncülük etmeyi hedefliyoruz. 
                        Yapay zeka destekli eğitim araçları ile öğrencilerin YDS başarısını artırırken, 
                        aynı zamanda İngilizce dil becerilerini kalıcı şekilde geliştirmelerini sağlıyoruz.
                    </p>
                    <p class="vision-text">
                        Platformumuz sürekli gelişim halindedir ve kullanıcı geri bildirimlerini değerlendirerek 
                        en etkili öğrenme deneyimini sunmak için çalışmaya devam ediyoruz.
                    </p>
                </div>
                
                <div class="contact-section">
                    <h2>İletişim & Destek</h2>
                    <p>Platform hakkında sorularınız, önerileriniz veya teknik destek için bizimle iletişime geçebilirsiniz. 
                    Geri bildirimleriniz platformun geliştirilmesi için çok değerli.</p>
                    <div class="contact-info">
                        <div class="contact-item">
                            <div class="contact-icon">📧</div>
                            <div class="contact-details">
                                <h4>E-posta İletişim</h4>
                                <a href="mailto:okanyaldiz@icloud.com">okanyaldiz@icloud.com</a>
                                <p>Teknik destek, öneriler ve işbirlikleri için</p>
                            </div>
                        </div>
                        <div class="contact-item">
                            <div class="contact-icon">💼</div>
                            <div class="contact-details">
                                <h4>Profesyonel Ağ</h4>
                                <a href="https://www.linkedin.com/in/okanyaldiz" target="_blank">linkedin.com/in/okanyaldiz</a>
                                <p>Eğitim teknolojileri ve kariyer fırsatları</p>
                            </div>
                        </div>
                    </div>
                    <div class="contact-note">
                        <div class="note-icon">💡</div>
                        <div class="note-content">
                            <p><strong>Platform Hakkında:</strong> YDS Hazırlık Platformu açık kaynak kodlu bir proje olarak geliştirilmiş ve sürekli iyileştirmeye açık bir şekilde yönetilmektedir. Kullanıcı deneyimini artırmak için düzenli güncellemeler yapılmaktadır.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
    </div>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Quiz hazırlanıyor...</p>
    </div>

    <script>
// Complete Quiz Platform JavaScript
class QuizApp {
    constructor() {
        this.quizData = null;
        this.currentQuestionIndex = 0;
        this.userAnswers = new Map();
        this.timer = null;
        this.timeLeft = 30;
        this.startTime = null;
        this.endTime = null;
        this.currentSection = 'home';
        this.timeUpHandled = false;
        
        this.init();
    }

    init() {
        this.bindEvents();
        this.updateCharCount();
        this.loadTheme();
    }

    bindEvents() {
        // Theme toggle
        const themeToggle = document.getElementById('themeToggle');
        if (themeToggle) {
            themeToggle.addEventListener('click', () => this.toggleTheme());
        }

        // Character count
        const jsonInput = document.getElementById('jsonInput');
        if (jsonInput) {
            jsonInput.addEventListener('input', () => this.updateCharCount());
        }

        // Upload section buttons
        const validateBtn = document.getElementById('validateBtn');
        const startQuizBtn = document.getElementById('startQuizBtn');
        if (validateBtn) {
            validateBtn.addEventListener('click', () => this.validateJSON());
        }
        if (startQuizBtn) {
            startQuizBtn.addEventListener('click', () => this.startQuiz());
        }

        // Quiz navigation buttons
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const finishBtn = document.getElementById('finishBtn');
        if (prevBtn) {
            prevBtn.addEventListener('click', () => this.previousQuestion());
        }
        if (nextBtn) {
            nextBtn.addEventListener('click', () => this.nextQuestion());
        }
        if (finishBtn) {
            finishBtn.addEventListener('click', () => this.finishQuiz());
        }

        // Results section buttons
        const exportBtn = document.getElementById('exportBtn');
        const restartBtn = document.getElementById('restartBtn');
        const resetBtn = document.getElementById('resetBtn');
        if (exportBtn) {
            exportBtn.addEventListener('click', () => this.exportResults());
        }
        if (restartBtn) {
            restartBtn.addEventListener('click', () => this.resetQuiz());
        }
        if (resetBtn) {
            resetBtn.addEventListener('click', () => this.resetQuiz());
        }

        // Keyboard shortcuts
        document.addEventListener('keydown', (e) => this.handleKeyboard(e));

        // Tab functionality - delay to ensure DOM is ready
        setTimeout(() => {
            this.initializeTabs();
        }, 100);
    }

    showSection(sectionName) {
        // Hide all sections
        const sections = document.querySelectorAll('.section');
        sections.forEach(section => section.classList.remove('active'));
        
        // Show target section
        const targetSection = document.getElementById(`${sectionName}Section`);
        if (targetSection) {
            targetSection.classList.add('active');
        }
        
        // Update mode indicator
        const modeIndicator = document.getElementById('modeIndicator');
        if (modeIndicator) {
            const modes = {
                'upload': 'JSON Yükleme Modu',
                'quiz': 'Quiz Modu',
                'results': 'Sonuçlar Modu'
            };
            modeIndicator.textContent = modes[sectionName] || 'Quiz Platform';
        }
        
        this.currentSection = sectionName;
    }





    toggleTheme() {
        const body = document.body;
        const isDark = body.classList.contains('dark-theme');
        
        if (isDark) {
            body.classList.remove('dark-theme');
            body.classList.add('light-theme');
            localStorage.setItem('theme', 'light');
        } else {
            body.classList.remove('light-theme');
            body.classList.add('dark-theme');
            localStorage.setItem('theme', 'dark');
        }
    }

    loadTheme() {
        const savedTheme = localStorage.getItem('theme') || 'light';
        const body = document.body;
        
        body.classList.remove('light-theme', 'dark-theme');
        body.classList.add(`${savedTheme}-theme`);
    }

    updateCharCount() {
        const input = document.getElementById('jsonInput');
        const charCount = document.getElementById('charCount');
        if (input && charCount) {
            charCount.textContent = input.value.length;
        }
    }

    showToast(title, message, type = 'success') {
        const container = document.getElementById('toastContainer');
        if (!container) return;

        const toast = document.createElement('div');
        toast.className = `toast ${type}`;
        toast.innerHTML = `
            <div class="toast-content">
                <div class="toast-title">${title}</div>
                <div class="toast-message">${message}</div>
            </div>
            <button class="toast-close">&times;</button>
        `;

        // Auto remove after 4 seconds
        setTimeout(() => {
            if (toast.parentNode) {
                toast.remove();
            }
        }, 4000);

        // Manual close
        const closeBtn = toast.querySelector('.toast-close');
        if (closeBtn) {
            closeBtn.addEventListener('click', () => toast.remove());
        }

        container.appendChild(toast);
    }

    showLoading(show = true) {
        const overlay = document.getElementById('loadingOverlay');
        if (overlay) {
            overlay.style.display = show ? 'flex' : 'none';
        }
    }

    validateJSON() {
        const input = document.getElementById('jsonInput');
        const validationResult = document.getElementById('validationResult');
        const validationDetails = document.getElementById('validationDetails');
        const startQuizBtn = document.getElementById('startQuizBtn');
        
        if (!input || !validationResult) return;
        
        this.showLoading(true);
        
        // Simulate validation delay for better UX
        setTimeout(() => {
            try {
                const data = JSON.parse(input.value);
                
                // Basic validation
                if (!data.questions || !Array.isArray(data.questions)) {
                    throw new Error('JSON must contain a "questions" array');
                }
                
                if (data.questions.length === 0) {
                    throw new Error('Questions array cannot be empty');
                }
                
                // Validate each question
                data.questions.forEach((q, index) => {
                    if (!q.question || !q.options || !Array.isArray(q.options)) {
                        throw new Error(`Question ${index + 1} must have "question" and "options" array`);
                    }
                    if (q.options.length < 2) {
                        throw new Error(`Question ${index + 1} must have at least 2 options`);
                    }
                    if (typeof q.correct !== 'number' || q.correct < 0 || q.correct >= q.options.length) {
                        throw new Error(`Question ${index + 1} has invalid "correct" answer index`);
                    }
                });
                
                // Store valid data
                this.quizData = data;
                
                // Success
                validationResult.className = 'validation-result';
                validationResult.style.display = 'flex';
                if (validationDetails) {
                    validationDetails.textContent = `${data.questions.length} soru başarıyla doğrulandı. ${data.title || 'Quiz'} hazır!`;
                }
                if (startQuizBtn) {
                    startQuizBtn.disabled = false;
                }
                
                this.showToast('Başarılı!', `${data.questions.length} soru doğrulandı`, 'success');
                
            } catch (error) {
                // Error
                validationResult.className = 'validation-result error';
                validationResult.style.display = 'flex';
                if (validationDetails) {
                    validationDetails.innerHTML = `<strong>Hata:</strong> ${error.message}`;
                }
                if (startQuizBtn) {
                    startQuizBtn.disabled = true;
                }
                
                this.showToast('Validation Hatası', error.message, 'error');
            }
            
            this.showLoading(false);
        }, 500);
    }

    startQuiz() {
        if (!this.quizData || !this.quizData.questions.length) {
            this.showToast('Hata', 'Geçerli quiz verisi bulunamadı', 'error');
            return;
        }

        // Reset quiz state
        this.currentQuestionIndex = 0;
        this.userAnswers.clear();
        this.startTime = new Date();
        this.endTime = null;

        // Update UI
        this.showSection('quiz');
        this.updateQuizProgress();
        this.displayQuestion();
        
        // Only start timer if not disabled in quiz data
        if (this.quizData.timer !== false) {
            this.startTimer();
            this.showToast('Quiz Başladı!', 'Her soru için 30 saniyeniz var', 'success');
        } else {
            this.showToast('Quiz Başladı!', 'Zamansız quiz - kendi hızınızda ilerleyin', 'success');
        }
    }

    displayQuestion() {
        if (!this.quizData || !this.quizData.questions[this.currentQuestionIndex]) {
            return;
        }

        const question = this.quizData.questions[this.currentQuestionIndex];
        
        // Check if this is a reading question and show passage
        this.displayReadingPassage(question);
        
        // Update question text
        const questionText = document.getElementById('questionText');
        if (questionText) {
            questionText.textContent = question.question;
        }

        // Update total questions
        const totalQuestions = document.getElementById('totalQuestions');
        if (totalQuestions) {
            totalQuestions.textContent = this.quizData.questions.length;
        }

        // Clear and populate options
        const optionsContainer = document.getElementById('optionsContainer');
        if (optionsContainer) {
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const optionElement = document.createElement('div');
                optionElement.className = 'option-item';
                optionElement.innerHTML = `
                    <div class="option-letter">${String.fromCharCode(65 + index)}</div>
                    <div class="option-text">${option}</div>
                `;
                
                // Check if already answered
                if (this.userAnswers.has(this.currentQuestionIndex) && 
                    this.userAnswers.get(this.currentQuestionIndex) === index) {
                    optionElement.classList.add('selected');
                }
                
                optionElement.addEventListener('click', () => this.selectOption(index));
                optionsContainer.appendChild(optionElement);
            });
        }

        this.updateNavigationButtons();
        // Only reset timer for first question or when moving between questions, and if timer is enabled
        if ((this.currentQuestionIndex === 0 || !this.timer) && this.quizData.timer !== false) {
            this.resetTimer();
        }
    }

    displayReadingPassage(question) {
        const readingPassage = document.getElementById('readingPassage');
        const passageContent = document.getElementById('passageContent');
        
        if (!readingPassage || !passageContent) return;
        
        // Auto-detect passage from various sources
        let passage = '';
        
        // Check for explicit passage in data
        if (question.passage) {
            passage = question.passage;
        } else if (this.quizData.passage) {
            passage = this.quizData.passage;
        }
        
        // Auto-detect based on quiz type
        const quizType = this.quizData.type ? this.quizData.type.toLowerCase() : '';
        if (quizType.includes('reading') || 
            quizType.includes('yds') || 
            quizType.includes('toefl') || 
            quizType.includes('ielts')) {
            // For these exam types, always show passage if available
            passage = passage || this.quizData.passage || '';
        }
        
        // Auto-detect from question patterns (reading comprehension indicators)
        if (!passage && this.quizData.questions.length > 0) {
            const allQuestions = this.quizData.questions.map(q => q.question).join(' ');
            const readingIndicators = allQuestions.match(/according to (the )?(text|passage|article|paragraph)|in the (text|passage|article)|the author (states|mentions|suggests)|based on the (text|passage)/gi);
            
            if (readingIndicators && readingIndicators.length >= 2) {
                // Likely a reading comprehension quiz
                passage = this.quizData.passage || '';
            }
        }
        
        if (passage && passage.trim()) {
            passageContent.textContent = passage;
            readingPassage.style.display = 'block';
            
            // Update passage header based on quiz type
            const header = readingPassage.querySelector('h3');
            if (header) {
                if (quizType.includes('yds')) {
                    header.textContent = 'YDS Reading Passage';
                } else if (quizType.includes('toefl')) {
                    header.textContent = 'TOEFL Reading Passage';
                } else if (quizType.includes('ielts')) {
                    header.textContent = 'IELTS Reading Passage';
                } else {
                    header.textContent = 'Reading Passage';
                }
            }
        } else {
            readingPassage.style.display = 'none';
        }
    }

    selectOption(optionIndex) {
        // Store answer
        this.userAnswers.set(this.currentQuestionIndex, optionIndex);
        
        // Update UI
        const options = document.querySelectorAll('.option-item');
        options.forEach((option, index) => {
            option.classList.toggle('selected', index === optionIndex);
        });
        
        this.updateNavigationButtons();
        // Don't reset timer when user selects an option
    }

    updateQuizProgress() {
        const currentQuestion = document.getElementById('currentQuestion');
        const progressFill = document.getElementById('progressFill');
        const progressPercentage = document.getElementById('progressPercentage');
        
        if (currentQuestion) {
            currentQuestion.textContent = this.currentQuestionIndex + 1;
        }
        
        const progress = ((this.currentQuestionIndex + 1) / this.quizData.questions.length) * 100;
        
        if (progressFill) {
            progressFill.style.width = `${progress}%`;
        }
        
        if (progressPercentage) {
            progressPercentage.textContent = `${Math.round(progress)}%`;
        }
    }

    updateNavigationButtons() {
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const finishBtn = document.getElementById('finishBtn');
        
        // Previous button
        if (prevBtn) {
            prevBtn.disabled = this.currentQuestionIndex === 0;
        }
        
        // Next/Finish button logic
        const hasAnswer = this.userAnswers.has(this.currentQuestionIndex);
        const isLastQuestion = this.currentQuestionIndex === this.quizData.questions.length - 1;
        
        if (isLastQuestion) {
            if (nextBtn) nextBtn.style.display = 'none';
            if (finishBtn) {
                finishBtn.style.display = 'inline-flex';
                finishBtn.disabled = !hasAnswer;
            }
        } else {
            if (nextBtn) {
                nextBtn.style.display = 'inline-flex';
                nextBtn.disabled = !hasAnswer;
            }
            if (finishBtn) finishBtn.style.display = 'none';
        }
    }

    previousQuestion() {
        if (this.currentQuestionIndex > 0) {
            this.currentQuestionIndex--;
            this.updateQuizProgress();
            this.displayQuestion();
            if (this.quizData.timer !== false) {
                this.resetTimer(); // Reset timer when navigating
            }
        }
    }

    nextQuestion() {
        if (this.currentQuestionIndex < this.quizData.questions.length - 1) {
            this.currentQuestionIndex++;
            this.updateQuizProgress();
            this.displayQuestion();
            if (this.quizData.timer !== false) {
                this.resetTimer(); // Reset timer when navigating
            }
        }
    }

    startTimer() {
        this.timeLeft = 30;
        this.timeUpHandled = false; // Reset flag
        this.updateTimerDisplay();
        
        this.timer = setInterval(() => {
            this.timeLeft--;
            this.updateTimerDisplay();
            
            if (this.timeLeft <= 0 && !this.timeUpHandled) {
                this.handleTimeUp();
            }
        }, 1000);
    }

    resetTimer() {
        if (this.timer) {
            clearInterval(this.timer);
        }
        this.startTimer();
    }

    updateTimerDisplay() {
        const timerDisplay = document.getElementById('timerDisplay');
        const timerElement = document.querySelector('.quiz-timer');
        
        if (timerDisplay) {
            timerDisplay.textContent = this.timeLeft;
        }
        
        if (timerElement) {
            timerElement.classList.remove('warning', 'danger');
            if (this.timeLeft <= 5) {
                timerElement.classList.add('danger');
            } else if (this.timeLeft <= 10) {
                timerElement.classList.add('warning');
            }
        }
    }

    handleTimeUp() {
        if (this.timeUpHandled) return; // Prevent spam
        this.timeUpHandled = true;
        
        if (this.timer) {
            clearInterval(this.timer);
            this.timer = null;
        }
        
        // Auto-advance to next question or finish quiz
        if (this.currentQuestionIndex < this.quizData.questions.length - 1) {
            this.showToast('Süre Doldu!', 'Sonraki soruya geçiliyor...', 'warning');
            setTimeout(() => this.nextQuestion(), 1500);
        } else {
            this.showToast('Süre Doldu!', 'Quiz otomatik olarak tamamlanıyor...', 'warning');
            setTimeout(() => this.finishQuiz(), 1500);
        }
    }

    finishQuiz() {
        if (this.timer) {
            clearInterval(this.timer);
        }
        
        this.endTime = new Date();
        this.calculateResults();
        this.showSection('results');
        
        this.showToast('Quiz Tamamlandı!', 'Sonuçlarınızı görüntüleyebilirsiniz', 'success');
    }

    calculateResults() {
        let score = 0;
        const results = [];
        const wrongAnswers = [];
        
        this.quizData.questions.forEach((question, index) => {
            const userAnswer = this.userAnswers.get(index);
            const isCorrect = userAnswer === question.correct;
            
            if (isCorrect) {
                score++;
            } else {
                wrongAnswers.push({
                    question: question.question,
                    userAnswer: userAnswer !== undefined ? question.options[userAnswer] : 'Yanıtlanmadı',
                    correctAnswer: question.options[question.correct],
                    explanation: question.explanation || 'Açıklama mevcut değil'
                });
            }
            
            results.push({
                question: question.question,
                options: question.options,
                userAnswer,
                correctAnswer: question.correct,
                isCorrect,
                explanation: question.explanation
            });
        });
        
        const totalQuestions = this.quizData.questions.length;
        const percentage = Math.round((score / totalQuestions) * 100);
        const totalTime = this.endTime - this.startTime;
        
        this.results = {
            score,
            totalQuestions,
            percentage,
            totalTime,
            results,
            wrongAnswers,
            quizData: this.quizData
        };
        
        this.displayResults();
    }

    displayResults() {
        // Update result cards
        const scoreValue = document.getElementById('scoreValue');
        const percentageValue = document.getElementById('percentageValue');
        const timeValue = document.getElementById('timeValue');
        
        if (scoreValue) {
            scoreValue.textContent = `${this.results.score}/${this.results.totalQuestions}`;
        }
        
        if (percentageValue) {
            percentageValue.textContent = `${this.results.percentage}%`;
        }
        
        if (timeValue) {
            const minutes = Math.floor(this.results.totalTime / 60000);
            const seconds = Math.floor((this.results.totalTime % 60000) / 1000);
            timeValue.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Display detailed results
        this.displayDetailedResults();
    }

    displayDetailedResults() {
        const container = document.getElementById('detailedResults');
        if (!container) return;
        
        let html = '<h3>Detaylı Sonuçlar</h3>';
        
        this.results.results.forEach((result, index) => {
            const isCorrect = result.isCorrect;
            const userAnswerText = result.userAnswer !== undefined ? 
                result.options[result.userAnswer] : 'Yanıtlanmadı';
            
            html += `
                <div class="result-item ${isCorrect ? 'correct' : 'incorrect'}">
                    <div class="result-question">${index + 1}. ${result.question}</div>
                    <div class="result-answers">
                        <strong>Sizin cevabınız:</strong> ${userAnswerText} ${isCorrect ? '✓' : '✗'}<br>
                        <strong>Doğru cevap:</strong> ${result.options[result.correctAnswer]}
                    </div>
                    ${result.explanation ? `<div class="result-explanation">${result.explanation}</div>` : ''}
                </div>
            `;
        });
        
        container.innerHTML = html;
    }

    exportResults() {
        const prompt = this.generateChatGPTPrompt();
        this.copyToClipboard(prompt);
        
        this.showToast('Kopyalandı!', 'ChatGPT koçluk metni panoya kopyalandı. ChatGPT\'ye yapıştırabilirsiniz.', 'success');
    }

    copyToClipboard(text) {
        if (navigator.clipboard && window.isSecureContext) {
            navigator.clipboard.writeText(text);
        } else {
            // Fallback for older browsers
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.left = '-999999px';
            textArea.style.top = '-999999px';
            document.body.appendChild(textArea);
            textArea.focus();
            textArea.select();
            document.execCommand('copy');
            textArea.remove();
        }
    }

    generateChatGPTPrompt() {
        const quizType = this.quizData?.type || 'İngilizce Quiz';
        const quizTitle = this.quizData?.title || 'Quiz';
        const wrongCount = this.results.wrongAnswers.length;
        const totalCount = this.results.totalQuestions;
        const correctCount = this.results.score;
        const percentage = this.results.percentage;
        
        let prompt = `🎯 **${quizType} Performans Analizi & Koçluk**\n\n`;
        prompt += `📊 **Quiz Sonuçlarım:**\n`;
        prompt += `• Test Türü: ${quizType}\n`;
        prompt += `• Quiz Başlığı: ${quizTitle}\n`;
        prompt += `• Toplam Soru: ${totalCount}\n`;
        prompt += `• Doğru Cevap: ${correctCount}/${totalCount}\n`;
        prompt += `• Başarı Oranı: %${percentage}\n`;
        
        // Quiz type specific evaluation
        if (quizType.toLowerCase().includes('yds')) {
            if (percentage >= 80) prompt += `• YDS Seviyesi: Çok İyi (YDS'de başarılı olabilir)\n`;
            else if (percentage >= 65) prompt += `• YDS Seviyesi: İyi (Daha fazla pratik gerekli)\n`;
            else if (percentage >= 50) prompt += `• YDS Seviyesi: Orta (Temel konularda çalışma gerekli)\n`;
            else prompt += `• YDS Seviyesi: Başlangıç (Yoğun çalışma gerekli)\n`;
        } else if (quizType.toLowerCase().includes('toefl')) {
            if (percentage >= 85) prompt += `• TOEFL Tahmini: 90+ (Hedef skorlara yakın)\n`;
            else if (percentage >= 70) prompt += `• TOEFL Tahmini: 75-89 (İyi seviye)\n`;
            else if (percentage >= 55) prompt += `• TOEFL Tahmini: 60-74 (Orta seviye)\n`;
            else prompt += `• TOEFL Tahmini: <60 (Temel seviye)\n`;
        } else if (quizType.toLowerCase().includes('ielts')) {
            if (percentage >= 85) prompt += `• IELTS Tahmini: 7.0+ (İleri seviye)\n`;
            else if (percentage >= 70) prompt += `• IELTS Tahmini: 6.0-6.5 (Orta-ileri)\n`;
            else if (percentage >= 55) prompt += `• IELTS Tahmini: 5.0-5.5 (Orta seviye)\n`;
            else prompt += `• IELTS Tahmini: <5.0 (Başlangıç seviye)\n`;
        }
        
        prompt += `\n`;

        if (wrongCount === 0) {
            prompt += `🎉 **Mükemmel Performans!**\n\n`;
            prompt += `Tebrikler! Bu ${quizType} testinde %100 başarı gösterdiniz. Bu gerçekten harika bir sonuç!\n\n`;
            
            if (quizType.toLowerCase().includes('yds')) {
                prompt += `🏆 **YDS Başarı Stratejisi:**\n`;
                prompt += `• Şu anki seviyeniz YDS için çok uygun\n`;
                prompt += `• Farklı YDS karma testleri deneyin\n`;
                prompt += `• Reading passage hızınızı artırın\n`;
                prompt += `• Zor vocabulary sorularına odaklanın\n\n`;
            }
            
            prompt += `📚 **İleri Seviye Öneriler:**\n`;
            prompt += `• Daha zor seviyede testler deneyin\n`;
            prompt += `• Farklı sınav türlerini (${quizType.includes('YDS') ? 'TOEFL/IELTS' : 'YDS/diğer'}) deneyin\n`;
            prompt += `• Academic English kaynaklarını inceleyin\n`;
            prompt += `• Zamanlı pratik yapmaya devam edin\n\n`;
            prompt += `🎯 **ChatGPT'ye Soru:** Bu seviyemde hangi ileri konuları çalışmalıyım?`;
        } else {
            prompt += `❌ **Gelişim Gereken Alanlar (${wrongCount} yanlış):**\n\n`;
            
            this.results.wrongAnswers.forEach((item, index) => {
                prompt += `**Yanlış ${index + 1}:**\n`;
                prompt += `📝 **Soru:** ${item.question}\n`;
                prompt += `❌ **Verdiğim Cevap:** ${item.userAnswer}\n`;
                prompt += `✅ **Doğru Cevap:** ${item.correctAnswer}\n`;
                if (item.explanation && item.explanation !== 'Açıklama mevcut değil') {
                    prompt += `💡 **Açıklama:** ${item.explanation}\n`;
                }
                prompt += `---\n\n`;
            });

            prompt += `🤔 **Kişiselleştirilmiş Analiz İsteği:**\n\n`;
            prompt += `Bu ${quizType} testindeki yanlış cevaplarıma göre:\n\n`;
            
            prompt += `**1. Temel Eksiklik Analizi:**\n`;
            prompt += `- Hangi konularda (grammar, vocabulary, reading comprehension, sentence completion) zayıfım?\n`;
            prompt += `- Bu hata türleri ${quizType} sınavında ne kadar kritik?\n\n`;
            
            prompt += `**2. Hata Sebepleri:**\n`;
            prompt += `- Bu yanlışlara neden olan temel problemler neler?\n`;
            prompt += `- Bilgi eksikliği mi, dikkat eksikliği mi, yoksa kavram karmaşası mı?\n\n`;
            
            prompt += `**3. Hedefe Yönelik Çalışma Planı:**\n`;
            if (quizType.toLowerCase().includes('yds')) {
                prompt += `- YDS'ye özel hangi konulara odaklanmalıyım?\n`;
                prompt += `- YDS stratejileri ve zaman yönetimi için öneriler\n`;
            } else if (quizType.toLowerCase().includes('toefl')) {
                prompt += `- TOEFL formatına özel çalışma önerileri\n`;
                prompt += `- Academic vocabulary ve complex structure çalışması\n`;
            } else if (quizType.toLowerCase().includes('ielts')) {
                prompt += `- IELTS formatına uygun çalışma metotları\n`;
                prompt += `- British English ve formal language kullanımı\n`;
            } else {
                prompt += `- Bu konu alanında derinlemesine çalışma önerileri\n`;
            }
            prompt += `- Günlük/haftalık çalışma programı önerisi\n\n`;
            
            prompt += `**4. Pratik Önerileri:**\n`;
            prompt += `- Bu seviyemde hangi tür sorular çözmeliyim?\n`;
            prompt += `- Hangi kaynaklardan çalışmalıyım?\n`;
            prompt += `- Ne kadar sürede gelişme görebilirim?\n\n`;
            
            prompt += `**5. Motivasyon & Hedef:**\n`;
            prompt += `- Mevcut %${percentage} başarı oranımı nasıl %85+ yapabilirim?\n`;
            prompt += `- Güçlü yanlarımı nasıl geliştirip zayıf yanlarımı nasıl güçlendirebilirim?\n\n`;
            
            prompt += `💪 **Lütfen yukarıdaki tüm noktalara detaylı, kişiselleştirilmiş ve uygulanabilir cevaplar ver. Somut örnekler ve çalışma stratejileri öner.**`;
        }

        return prompt;
    }

    formatTime(seconds) {
        const minutes = Math.floor(seconds / 60);
        const remainingSeconds = seconds % 60;
        return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
    }

    downloadText(text, filename) {
        const element = document.createElement('a');
        element.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(text));
        element.setAttribute('download', filename);
        element.style.display = 'none';
        document.body.appendChild(element);
        element.click();
        document.body.removeChild(element);
    }

    handleKeyboard(e) {
        if (this.currentSection !== 'quiz') return;
        
        // Number keys 1-5 for option selection
        if (e.key >= '1' && e.key <= '5') {
            const optionIndex = parseInt(e.key) - 1;
            const question = this.quizData?.questions[this.currentQuestionIndex];
            if (question && optionIndex < question.options.length) {
                this.selectOption(optionIndex);
            }
        }
        
        // Arrow keys for navigation
        if (e.key === 'ArrowLeft' && this.currentQuestionIndex > 0) {
            this.previousQuestion();
        }
        
        if (e.key === 'ArrowRight' && this.userAnswers.has(this.currentQuestionIndex)) {
            if (this.currentQuestionIndex < this.quizData.questions.length - 1) {
                this.nextQuestion();
            } else {
                this.finishQuiz();
            }
        }
        
        // Enter key to finish quiz on last question
        if (e.key === 'Enter' && this.currentQuestionIndex === this.quizData.questions.length - 1 
            && this.userAnswers.has(this.currentQuestionIndex)) {
            this.finishQuiz();
        }
    }

    resetQuiz() {
        // Reset all state
        this.quizData = null;
        this.currentQuestionIndex = 0;
        this.userAnswers.clear();
        this.results = null;
        this.startTime = null;
        this.endTime = null;
        
        if (this.timer) {
            clearInterval(this.timer);
            this.timer = null;
        }
        
        // Reset UI
        const jsonInput = document.getElementById('jsonInput');
        const validationResult = document.getElementById('validationResult');
        const startQuizBtn = document.getElementById('startQuizBtn');
        
        if (jsonInput) {
            jsonInput.value = '';
        }
        
        if (validationResult) {
            validationResult.style.display = 'none';
        }
        
        if (startQuizBtn) {
            startQuizBtn.disabled = true;
        }
        
        this.updateCharCount();
        this.showSection('home');
        
        this.showToast('Sıfırlandı', 'Yeni bir quiz için JSON verisi yükleyebilirsiniz', 'success');
    }

    initializeTabs() {
        const tabButtons = document.querySelectorAll('.tab-btn');
        const tabContents = document.querySelectorAll('.tab-content');

        tabButtons.forEach(button => {
            button.addEventListener('click', () => {
                const targetTab = button.getAttribute('data-tab');
                
                // Remove active class from all buttons and contents
                tabButtons.forEach(btn => btn.classList.remove('active'));
                tabContents.forEach(content => content.classList.remove('active'));
                
                // Add active class to clicked button and corresponding content
                button.classList.add('active');
                const targetContent = document.getElementById(`${targetTab}-tab`);
                if (targetContent) {
                    targetContent.classList.add('active');
                }
            });
        });
    }
}

// Prompt reset functionality
function setupPromptReset() {
    const resetPromptBtn = document.getElementById('resetPromptBtn');
    if (resetPromptBtn) {
        resetPromptBtn.addEventListener('click', () => {
            // Reset all form fields
            const topicSelect = document.getElementById('quizTopic');
            const countSelect = document.getElementById('questionCount');
            const difficultySelect = document.getElementById('difficulty');
            const generatedPrompt = document.getElementById('generatedPrompt');
            
            if (topicSelect) topicSelect.selectedIndex = 0;
            if (countSelect) countSelect.selectedIndex = 2; // Default to 20 questions
            if (difficultySelect) difficultySelect.selectedIndex = 1; // Default to İleri Seviye
            if (generatedPrompt) {
                generatedPrompt.style.display = 'none';
                resetPromptBtn.style.display = 'none';
            }
            
            if (window.app) {
                window.app.showToast('Sıfırlandı', 'Prompt üretici varsayılan ayarlara döndürüldü', 'success');
            }
        });
    }
}

// Hero section buttons setup
function setupHeroButtons() {
    const heroButtons = document.querySelectorAll('.hero-actions .btn[data-section]');
    heroButtons.forEach(button => {
        button.addEventListener('click', () => {
            const targetSection = button.getAttribute('data-section');
            
            // Use global navigation function
            const navButtons = document.querySelectorAll('.nav-btn');
            navButtons.forEach(btn => btn.classList.remove('active'));
            
            const targetNavBtn = document.querySelector(`.nav-btn[data-section="${targetSection}"]`);
            if (targetNavBtn) {
                targetNavBtn.classList.add('active');
                // Trigger click to use existing navigation logic
                targetNavBtn.click();
            }
        });
    });
}

// Global function for copying prompts
function copyToClipboard(element) {
    const text = element.textContent;
    
    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(text).then(() => {
            showCopyFeedback(element);
        });
    } else {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = text;
        textArea.style.position = 'fixed';
        textArea.style.left = '-999999px';
        textArea.style.top = '-999999px';
        document.body.appendChild(textArea);
        textArea.focus();
        textArea.select();
        document.execCommand('copy');
        textArea.remove();
        showCopyFeedback(element);
    }
}

function showCopyFeedback(element) {
    element.classList.add('copied');
    setTimeout(() => {
        element.classList.remove('copied');
    }, 1000);
    
    // Show toast if app instance exists
    if (window.app) {
        window.app.showToast('Kopyalandı!', 'Prompt panoya kopyalandı', 'success');
    }
}

// Navigation functionality
function setupNavigation() {
    const navButtons = document.querySelectorAll('.nav-btn');
    const sections = document.querySelectorAll('.section');
    
    navButtons.forEach(button => {
        button.addEventListener('click', () => {
            const targetSection = button.dataset.section;
            
            // Update active nav button
            navButtons.forEach(btn => btn.classList.remove('active'));
            button.classList.add('active');
            
            // Show target section using CSS classes
            sections.forEach(section => {
                section.classList.remove('active');
            });
            
            let sectionId = targetSection + 'Section';
            if (targetSection === 'flashcard') sectionId = 'flashcardSection';
            if (targetSection === 'home') sectionId = 'homeSection';
            
            const targetSectionElement = document.getElementById(sectionId);
            if (targetSectionElement) {
                targetSectionElement.classList.add('active');
                
                // Scroll to top of the page
                window.scrollTo({
                    top: 0,
                    behavior: 'smooth'
                });
            }
            
            // Update mode indicator
            const modeIndicator = document.getElementById('modeIndicator');
            const modes = {
                'home': 'Ana Sayfa',
                'upload': 'Quiz Modu',
                'flashcard': 'Flashcard Modu',
                'placement': 'Seviye Tespit',
                'about': 'Hakkımızda'
            };
            if (modeIndicator && modes[targetSection]) {
                modeIndicator.textContent = modes[targetSection];
            }
        });
    });
}

// Prompt Generator functionality
function setupPromptGenerator() {
    const generateBtn = document.getElementById('generatePrompt');
    const generatedPrompt = document.getElementById('generatedPrompt');
    const generatedPromptText = document.getElementById('generatedPromptText');
    
    if (!generateBtn) return; // Exit if elements don't exist yet
    
    generateBtn.addEventListener('click', () => {
        const topic = document.getElementById('quizTopic').value;
        const count = document.getElementById('questionCount').value;
        const difficulty = document.getElementById('difficulty').value;
        
        const promptTemplates = {
            karma: `ChatGPT, bana YDS tarzında karma quiz hazırlar mısın? Lütfen SADECE JSON formatında ver, başka metin ekleme.

ZORUNLU JSON FORMAT:
{
  "title": "YDS Karma Quiz",
  "type": "YDS",
  "questions": [
    {
      "question": "Soru metni buraya",
      "options": ["A seçeneği", "B seçeneği", "C seçeneği", "D seçeneği"],
      "correct": 0,
      "explanation": "Açıklama buraya"
    }
  ]
}

İSTEK:
- Reading comprehension (2-3 passage, 8-10 soru)
- Grammar & structure (${Math.ceil(count/3)} soru) 
- Vocabulary & meaning (${Math.ceil(count/3)} soru)
- Sentence completion (${Math.floor(count/4)} soru)

Toplam ${count} soru, ${difficulty} seviyede.
Her soru için "question", "options" array (4 seçenek), "correct" index (0-3), "explanation" olmalı.`,

            reading: `ChatGPT, bana YDS reading comprehension quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "YDS Reading Comprehension",
  "type": "YDS",
  "passage": "Passage metni buraya (300-400 kelime)",
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"], 
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

${count} soru, ${difficulty} seviyede.
- Akademik/bilimsel passage
- Main idea, detail, inference soruları
- Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" olmalı.`,

            grammar: `ChatGPT, bana YDS grammar quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "YDS Grammar & Structure", 
  "type": "YDS",
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"],
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

${count} soru, ${difficulty} seviyede.
Konular: Conditional sentences, Passive voice, Reported speech, Modal verbs.
Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.`,

            vocabulary: `ChatGPT, bana YDS vocabulary quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "YDS Advanced Vocabulary",
  "type": "YDS", 
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"],
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

${count} soru, ${difficulty} seviyede.
- Academic vocabulary, synonyms, context-based meaning
- Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.`,

            sentence: `ChatGPT, bana YDS sentence completion quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "YDS Sentence Completion",
  "type": "YDS",
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"],
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

${count} soru, ${difficulty} seviyede.
- Complex sentence structures, linking words
- Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.`,

            phrasal: `ChatGPT, bana YDS phrasal verbs quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "YDS Phrasal Verbs",
  "type": "YDS",
  "questions": [
    {
      "question": "Soru metni", 
      "options": ["A", "B", "C", "D"],
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

${count} soru, ${difficulty} seviyede.
- Advanced phrasal verbs, contexts
- Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.`,

            idioms: `ChatGPT, bana YDS idioms quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "YDS Idioms & Expressions",
  "type": "YDS",
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"],
      "correct": 0, 
      "explanation": "Açıklama"
    }
  ]
}

${count} soru, ${difficulty} seviyede.
- Common idioms, business/academic expressions
- Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.`,

            academic: `ChatGPT, bana YDS academic vocabulary quiz hazırlar mısın? SADECE JSON formatında ver.

ZORUNLU JSON FORMAT:
{
  "title": "YDS Academic Vocabulary",
  "type": "YDS",
  "questions": [
    {
      "question": "Soru metni",
      "options": ["A", "B", "C", "D"], 
      "correct": 0,
      "explanation": "Açıklama"
    }
  ]
}

${count} soru, ${difficulty} seviyede.
- Academic Word List, research terminology
- Her soruda "question", "options" array (4 seçenek), "correct" index, "explanation" zorunlu.`
        };
        
        generatedPromptText.textContent = promptTemplates[topic];
        generatedPrompt.style.display = 'block';
        
        // Scroll to generated prompt
        generatedPrompt.scrollIntoView({ behavior: 'smooth' });
    });
}

// Flashcard functionality
function setupFlashcards() {
    let flashcards = [];
    let currentCardIndex = 0;
    let isFlipped = false;
    
    const vocabularyInput = document.getElementById('vocabularyInput');
    const createBtn = document.getElementById('createFlashcards');
    const demoBtn = document.getElementById('demoFlashcards');
    const quickDemoBtn = document.getElementById('quickDemo');
    const clearBtn = document.getElementById('clearFlashcards');
    const flashcardContainer = document.getElementById('flashcardContainer');
    const flashcard = document.getElementById('flashcard');
    const prevBtn = document.getElementById('prevCard');
    const nextBtn = document.getElementById('nextCard');
    const flipBtn = document.getElementById('flipCard');
    const shuffleBtn = document.getElementById('shuffleCards');
    const quizBtn = document.getElementById('createQuizFromCards');
    
    if (!createBtn) return; // Exit if elements don't exist yet
    
    function parseVocabulary(text) {
        const cards = [];
        
        // Try JSON format first
        try {
            const jsonData = JSON.parse(text);
            if (Array.isArray(jsonData)) {
                return jsonData.map(item => ({
                    word: item.word || item.english || '',
                    turkish: item.turkish || item.tr || '',
                    definition: item.definition || item.def || item.meaning || ''
                }));
            }
        } catch (e) {
            // Continue with text parsing
        }
        
        // Parse different text formats
        const lines = text.split('\n').filter(line => line.trim());
        
        for (let line of lines) {
            line = line.trim();
            if (!line || line.startsWith('#') || line.startsWith('//')) continue;
            
            let word = '', turkish = '', definition = '';
            
            // Format 1: Standard dash format (word - turkish - definition)
            if (line.includes(' - ')) {
                const parts = line.split(' - ');
                if (parts.length >= 2) {
                    word = parts[0].trim();
                    turkish = parts[1].trim();
                    definition = parts[2] ? parts[2].trim() : '';
                }
            }
            // Format 2: ChatGPT bold format (**word** - turkish)
            else if (line.includes('**') && line.includes(' - ')) {
                const boldMatch = line.match(/\*\*(.*?)\*\*/);
                if (boldMatch) {
                    word = boldMatch[1].trim();
                    const afterBold = line.split('**')[2];
                    if (afterBold && afterBold.includes(' - ')) {
                        turkish = afterBold.split(' - ')[1].trim();
                    }
                }
            }
            // Format 3: Numbered list (1. word - turkish - definition)
            else if (/^\d+\./.test(line)) {
                const withoutNumber = line.replace(/^\d+\.\s*/, '');
                if (withoutNumber.includes(' - ')) {
                    const parts = withoutNumber.split(' - ');
                    if (parts.length >= 2) {
                        word = parts[0].trim();
                        turkish = parts[1].trim();
                        definition = parts[2] ? parts[2].trim() : '';
                    }
                }
            }
            // Format 4: Definition line (Definition: ...)
            else if (line.toLowerCase().startsWith('definition:') || line.toLowerCase().startsWith('tanım:')) {
                if (cards.length > 0) {
                    cards[cards.length - 1].definition = line.split(':')[1].trim();
                }
                continue;
            }
            // Format 5: Colon format (word: turkish)
            else if (line.includes(': ') && !line.toLowerCase().startsWith('definition')) {
                const parts = line.split(': ');
                if (parts.length >= 2) {
                    word = parts[0].trim();
                    turkish = parts[1].trim();
                }
            }
            
            // Add card if we found word and turkish
            if (word && turkish) {
                cards.push({
                    word: word,
                    turkish: turkish,
                    definition: definition
                });
            }
        }
        
        return cards;
    }
    
    function createFlashcards() {
        const text = vocabularyInput.value.trim();
        if (!text) {
            alert('Lütfen kelime listesini girin');
            return;
        }
        
        flashcards = parseVocabulary(text);
        if (flashcards.length === 0) {
            alert('Geçerli kelime bulunamadı. Format: "word - türkçe - definition"');
            return;
        }
        
        currentCardIndex = 0;
        isFlipped = false;
        updateFlashcard();
        updateControls();
        flashcardContainer.style.display = 'block';
        
        // Scroll to flashcards
        flashcardContainer.scrollIntoView({ behavior: 'smooth' });
    }
    
    function updateFlashcard() {
        if (flashcards.length === 0) return;
        
        const card = flashcards[currentCardIndex];
        document.getElementById('cardWord').textContent = card.word;
        document.getElementById('cardTurkish').textContent = card.turkish;
        document.getElementById('cardDefinition').textContent = card.definition;
        
        document.getElementById('currentCard').textContent = currentCardIndex + 1;
        document.getElementById('totalCards').textContent = flashcards.length;
        
        // Reset flip state
        flashcard.classList.remove('flipped');
        isFlipped = false;
        
        // Update progress
        const progress = ((currentCardIndex + 1) / flashcards.length) * 100;
        document.getElementById('flashcardProgress').style.width = progress + '%';
    }
    
    function updateControls() {
        prevBtn.disabled = currentCardIndex === 0;
        nextBtn.disabled = currentCardIndex === flashcards.length - 1;
    }
    
    function flipCard() {
        flashcard.classList.toggle('flipped');
        isFlipped = !isFlipped;
    }
    
    function previousCard() {
        if (currentCardIndex > 0) {
            currentCardIndex--;
            updateFlashcard();
            updateControls();
        }
    }
    
    function nextCard() {
        if (currentCardIndex < flashcards.length - 1) {
            currentCardIndex++;
            updateFlashcard();
            updateControls();
        }
    }
    
    function shuffleCards() {
        for (let i = flashcards.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [flashcards[i], flashcards[j]] = [flashcards[j], flashcards[i]];
        }
        currentCardIndex = 0;
        updateFlashcard();
        updateControls();
    }
    
    function createQuizFromFlashcards() {
        if (flashcards.length < 3) {
            alert('Quiz için en az 3 kelime gerekli!');
            return;
        }
        
        // Generate quiz JSON from flashcards
        const quizData = {
            title: "Flashcard Kelimeleri Quiz",
            type: "YDS",
            timer: false, // Disable timer for flashcard quiz
            questions: []
        };
        
        // Create questions for each flashcard
        flashcards.forEach((card, index) => {
            // Question 1: Turkish to English
            const turkishToEnglish = {
                question: `"${card.turkish}" kelimesinin İngilizce karşılığı nedir?`,
                options: generateOptions(card.word, flashcards, 'word'),
                correct: 0,
                explanation: `"${card.turkish}" kelimesinin İngilizce karşılığı "${card.word}"dir. ${card.definition}`
            };
            
            // Question 2: English to Turkish  
            const englishToTurkish = {
                question: `"${card.word}" kelimesinin Türkçe anlamı nedir?`,
                options: generateOptions(card.turkish, flashcards, 'turkish'),
                correct: 0,
                explanation: `"${card.word}" kelimesinin Türkçe anlamı "${card.turkish}"dir. ${card.definition}`
            };
            
            quizData.questions.push(turkishToEnglish, englishToTurkish);
        });
        
        // Shuffle questions
        for (let i = quizData.questions.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [quizData.questions[i], quizData.questions[j]] = [quizData.questions[j], quizData.questions[i]];
        }
        
        // Take only 10 questions max
        quizData.questions = quizData.questions.slice(0, Math.min(10, quizData.questions.length));
        
        // Set JSON to quiz section and start quiz
        const jsonInput = document.getElementById('jsonInput');
        jsonInput.value = JSON.stringify(quizData, null, 2);
        
        // Switch to quiz mode and validate
        const uploadNavBtn = document.getElementById('quizNavBtn');
        uploadNavBtn.click();
        
        // Auto-validate and start quiz - simplified approach
        setTimeout(() => {
            if (window.app && window.app.validateJSON) {
                window.app.validateJSON();
                console.log('JSON validation attempted');
                
                // Wait for validation and try to start
                setTimeout(() => {
                    const startBtn = document.getElementById('startQuizBtn');
                    console.log('Start button found:', !!startBtn, 'disabled:', startBtn ? startBtn.disabled : 'N/A');
                    
                    if (startBtn) {
                        if (!startBtn.disabled) {
                            console.log('Clicking start button');
                            startBtn.click();
                        } else {
                            console.log('Button is disabled, showing manual instruction');
                        }
                    } else {
                        console.log('Start button not found');
                    }
                }, 1500);
            } else {
                console.error('app.validateJSON not available');
            }
        }, 1000);
        
        showToast('Quiz Hazırlanıyor', 'JSON oluşturuluyor', 'info');
    }
    
    function generateOptions(correctAnswer, allCards, field) {
        const options = [correctAnswer];
        const usedAnswers = new Set([correctAnswer.toLowerCase()]);
        
        // Get other random answers
        const shuffledCards = [...allCards].sort(() => 0.5 - Math.random());
        
        for (let card of shuffledCards) {
            if (options.length >= 4) break;
            const value = card[field];
            if (!usedAnswers.has(value.toLowerCase())) {
                options.push(value);
                usedAnswers.add(value.toLowerCase());
            }
        }
        
        // If not enough options, add some generic ones
        if (field === 'word' && options.length < 4) {
            const genericWords = ['accomplish', 'determine', 'establish', 'maintain', 'develop', 'consider', 'provide', 'include'];
            for (let word of genericWords) {
                if (options.length >= 4) break;
                if (!usedAnswers.has(word.toLowerCase())) {
                    options.push(word);
                    usedAnswers.add(word.toLowerCase());
                }
            }
        } else if (field === 'turkish' && options.length < 4) {
            const genericTurkish = ['yapmak', 'olmak', 'vermek', 'almak', 'görmek', 'bilmek', 'gelmek', 'gitmek'];
            for (let word of genericTurkish) {
                if (options.length >= 4) break;
                if (!usedAnswers.has(word.toLowerCase())) {
                    options.push(word);
                    usedAnswers.add(word.toLowerCase());
                }
            }
        }
        
        // Shuffle options
        for (let i = options.length - 1; i > 0; i--) {
            const j = Math.floor(Math.random() * (i + 1));
            [options[i], options[j]] = [options[j], options[i]];
        }
        
        return options;
    }
    
    // Helper function for showing toast (use global function if available)
    function showToast(title, message, type) {
        if (window.app && window.app.showToast) {
            window.app.showToast(title, message, type);
        } else {
            console.log(`Toast: ${title} - ${message} (${type})`);
        }
    }
    
    function clearFlashcards() {
        vocabularyInput.value = '';
        flashcardContainer.style.display = 'none';
        flashcards = [];
    }
    
    function loadDemoFlashcards() {
        const demoText = `achieve - başarmak - to successfully complete something
abundant - bol, zengin - existing in large quantities
acquire - elde etmek - to get or obtain something
adverse - olumsuz - harmful or unfavorable
analyze - analiz etmek - to examine in detail
approach - yaklaşım, yaklaşmak - a way of dealing with something
comprehensive - kapsamlı - complete and including everything
considerable - önemli, hatırı sayılır - notably large in size or amount
demonstrate - göstermek - to clearly show the existence of something
environment - çevre - the surroundings or conditions in which something exists`;
        
        vocabularyInput.value = demoText;
        createFlashcards();
    }
    
    // Event listeners
    createBtn.addEventListener('click', createFlashcards);
    if (demoBtn) demoBtn.addEventListener('click', loadDemoFlashcards);
    if (quickDemoBtn) quickDemoBtn.addEventListener('click', loadDemoFlashcards);
    clearBtn.addEventListener('click', clearFlashcards);
    flashcard.addEventListener('click', flipCard);
    flipBtn.addEventListener('click', flipCard);
    prevBtn.addEventListener('click', previousCard);
    nextBtn.addEventListener('click', nextCard);
    shuffleBtn.addEventListener('click', shuffleCards);
    if (quizBtn) quizBtn.addEventListener('click', createQuizFromFlashcards);
    if (quizBtn) quizBtn.addEventListener('click', createQuizFromFlashcards);
    
    // Keyboard navigation
    document.addEventListener('keydown', (e) => {
        if (flashcardContainer.style.display === 'none') return;
        
        switch(e.key) {
            case 'ArrowLeft':
                previousCard();
                break;
            case 'ArrowRight':
                nextCard();
                break;
            case ' ':
            case 'Enter':
                e.preventDefault();
                flipCard();
                break;
        }
    });
}

// Initialize app when DOM is loaded
// Placement Test Data (CEFR JSON)
const placementTestData = {
  "title": "CEFR English Placement Test - 60 Questions",
  "description": "This test assesses English proficiency from A1 to C2 levels with questions on Grammar, Vocabulary, Cloze, Reading, and Word Matching.",
  "structure": {
    "total_questions": 60,
    "sections": {
      "Grammar": 15,
      "Vocabulary": 15,
      "Cloze": 10,
      "Reading": 10,
      "WordMatching": 10
    },
    "scoring": {
      "A1": "0-15 correct answers",
      "A2": "16-25 correct answers",
      "B1": "26-35 correct answers",
      "B2": "36-45 correct answers",
      "C1": "46-54 correct answers",
      "C2": "55-60 correct answers"
    },
    "notes": "Each correct answer is 1 point; no negative marking. Final level determined by total correct answers."
  },
  "questions": [
    {
      "id": 1,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "She __________ to Paris every summer when she was a child.",
      "options": ["goes", "went", "used to go", "was going"],
      "correct": 2
    },
    {
      "id": 2,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "By the time we arrived, the movie __________.",
      "options": ["already started", "had already started", "was already starting", "has already started"],
      "correct": 1
    },
    {
      "id": 3,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "If I __________ more time, I would travel.",
      "options": ["have", "had", "would have", "will have"],
      "correct": 1
    },
    {
      "id": 4,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "He acts as if he __________ the boss.",
      "options": ["is", "were", "was", "be"],
      "correct": 1
    },
    {
      "id": 5,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "No sooner had we arrived __________ it started to rain.",
      "options": ["when", "than", "then", "that"],
      "correct": 1
    },
    {
      "id": 6,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "He wishes he __________ the truth earlier.",
      "options": ["knew", "knows", "had known", "would know"],
      "correct": 2
    },
    {
      "id": 7,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "The letter __________ by the time you receive this.",
      "options": ["will arrive", "will have arrived", "arrives", "has arrived"],
      "correct": 1
    },
    {
      "id": 8,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "__________ studying harder, he might pass the exam.",
      "options": ["Were he", "If he was", "Should he be", "Had he been"],
      "correct": 0
    },
    {
      "id": 9,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "I'd rather you __________ here tomorrow.",
      "options": ["come", "came", "will come", "would come"],
      "correct": 1
    },
    {
      "id": 10,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "He suggested that she __________ the meeting.",
      "options": ["attends", "attend", "attended", "attending"],
      "correct": 1
    },
    {
      "id": 11,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "__________ the weather, we decided to stay home.",
      "options": ["Due to", "Because", "Since", "Owing to"],
      "correct": 0
    },
    {
      "id": 12,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "Only when he left __________ how much I missed him.",
      "options": ["I realized", "did I realize", "I did realize", "realized I"],
      "correct": 1
    },
    {
      "id": 13,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "It's high time we __________ this project.",
      "options": ["finish", "finished", "have finished", "will finish"],
      "correct": 1
    },
    {
      "id": 14,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "Never __________ such a beautiful sunset.",
      "options": ["I have seen", "have I seen", "I saw", "did I see"],
      "correct": 1
    },
    {
      "id": 15,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "__________ you help me with this problem?",
      "options": ["Would", "Will", "Could", "Should"],
      "correct": 2
    },
    {
      "id": 16,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "The novel was __________ boring that I couldn't finish it.",
      "options": ["very", "so", "too", "quite"],
      "correct": 1
    },
    {
      "id": 17,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "His __________ to succeed motivated everyone around him.",
      "options": ["determination", "determine", "determined", "determining"],
      "correct": 0
    },
    {
      "id": 18,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "The medicine will __________ your pain.",
      "options": ["reduce", "deduce", "produce", "induce"],
      "correct": 0
    },
    {
      "id": 19,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "She has a __________ for languages and can speak five fluently.",
      "options": ["talent", "skill", "gift", "ability"],
      "correct": 2
    },
    {
      "id": 20,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "The company's profits have __________ significantly this year.",
      "options": ["declined", "decreased", "dropped", "fallen"],
      "correct": 0
    },
    {
      "id": 21,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "His behavior was completely __________.",
      "options": ["unacceptable", "inacceptable", "non-acceptable", "dis-acceptable"],
      "correct": 0
    },
    {
      "id": 22,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "The discovery could __________ change our understanding.",
      "options": ["potentially", "possibly", "probably", "likely"],
      "correct": 0
    },
    {
      "id": 23,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "They __________ the old building to make way for a new one.",
      "options": ["destroyed", "demolished", "ruined", "damaged"],
      "correct": 1
    },
    {
      "id": 24,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "Her explanation was so __________ that everyone understood immediately.",
      "options": ["clear", "obvious", "apparent", "evident"],
      "correct": 0
    },
    {
      "id": 25,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "The research __________ interesting results about sleep patterns.",
      "options": ["revealed", "showed", "displayed", "presented"],
      "correct": 0
    },
    {
      "id": 26,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "He was __________ about the outcome of the election.",
      "options": ["optimistic", "positive", "hopeful", "confident"],
      "correct": 0
    },
    {
      "id": 27,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "The __________ of the crime scene took several hours.",
      "options": ["investigation", "examination", "inspection", "analysis"],
      "correct": 0
    },
    {
      "id": 28,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "They reached a __________ agreement after long negotiations.",
      "options": ["mutual", "common", "shared", "joint"],
      "correct": 0
    },
    {
      "id": 29,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "The __________ of technology has changed our lives dramatically.",
      "options": ["advancement", "development", "progress", "improvement"],
      "correct": 0
    },
    {
      "id": 30,
      "section": "Vocabulary",
      "type": "multiple_choice",
      "question": "Her __________ to detail made her perfect for the job.",
      "options": ["attention", "focus", "concentration", "awareness"],
      "correct": 0
    },
    // Adding remaining questions from the JSON file - I'll keep it short for now and complete the functionality
    {
      "id": 31,
      "section": "Cloze",
      "type": "cloze",
      "passage": "The Amazon rainforest is often __(31)__ the 'lungs of the Earth' because it produces a significant amount of oxygen. However, deforestation __(32)__ this vital ecosystem at an alarming rate. Scientists warn that if current trends __(33)__, the consequences for global climate change could be __(34)__. Conservation efforts are __(35)__ to protect what remains of this precious resource.",
      "question": "Choose the best word for blank (31):",
      "options": ["called", "known", "referred", "named"],
      "correct": 0
    },
    {
      "id": 32,
      "section": "Cloze",
      "type": "cloze",
      "passage": "The Amazon rainforest is often __(31)__ the 'lungs of the Earth' because it produces a significant amount of oxygen. However, deforestation __(32)__ this vital ecosystem at an alarming rate. Scientists warn that if current trends __(33)__, the consequences for global climate change could be __(34)__. Conservation efforts are __(35)__ to protect what remains of this precious resource.",
      "question": "Choose the best word for blank (32):",
      "options": ["threatens", "is threatening", "has threatened", "will threaten"],
      "correct": 1
    },
    {
      "id": 33,
      "section": "Cloze",
      "type": "cloze",
      "passage": "The Amazon rainforest is often __(31)__ the 'lungs of the Earth' because it produces a significant amount of oxygen. However, deforestation __(32)__ this vital ecosystem at an alarming rate. Scientists warn that if current trends __(33)__, the consequences for global climate change could be __(34)__. Conservation efforts are __(35)__ to protect what remains of this precious resource.",
      "question": "Choose the best word for blank (33):",
      "options": ["continue", "will continue", "continued", "have continued"],
      "correct": 0
    },
    {
      "id": 34,
      "section": "Cloze",
      "type": "cloze",
      "passage": "The Amazon rainforest is often __(31)__ the 'lungs of the Earth' because it produces a significant amount of oxygen. However, deforestation __(32)__ this vital ecosystem at an alarming rate. Scientists warn that if current trends __(33)__, the consequences for global climate change could be __(34)__. Conservation efforts are __(35)__ to protect what remains of this precious resource.",
      "question": "Choose the best word for blank (34):",
      "options": ["catastrophic", "beneficial", "minimal", "temporary"],
      "correct": 0
    },
    {
      "id": 35,
      "section": "Cloze",
      "type": "cloze",
      "passage": "The Amazon rainforest is often __(31)__ the 'lungs of the Earth' because it produces a significant amount of oxygen. However, deforestation __(32)__ this vital ecosystem at an alarming rate. Scientists warn that if current trends __(33)__, the consequences for global climate change could be __(34)__. Conservation efforts are __(35)__ to protect what remains of this precious resource.",
      "question": "Choose the best word for blank (35):",
      "options": ["necessary", "optional", "discouraged", "forbidden"],
      "correct": 0
    },
    {
      "id": 36,
      "section": "Reading",
      "type": "multiple_choice",
      "passage": "The concept of artificial intelligence has fascinated humans for decades. While early predictions suggested that AI would quickly surpass human intelligence, the reality has been more complex. Modern AI systems excel at specific tasks but lack the general intelligence that humans possess.",
      "question": "According to the passage, what is true about AI development?",
      "options": ["AI has already surpassed human intelligence", "Early predictions about AI were overly optimistic", "AI systems have general intelligence", "AI development has been abandoned"],
      "correct": 1
    },
    {
      "id": 37,
      "section": "Reading",
      "type": "multiple_choice",
      "passage": "The concept of artificial intelligence has fascinated humans for decades. While early predictions suggested that AI would quickly surpass human intelligence, the reality has been more complex. Modern AI systems excel at specific tasks but lack the general intelligence that humans possess.",
      "question": "What can be inferred about modern AI systems?",
      "options": ["They are superior to humans in all areas", "They have limitations in their capabilities", "They possess general intelligence", "They are no longer being developed"],
      "correct": 1
    },
    {
      "id": 38,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'abundant':",
      "pairs": [
        {
          "target": "abundant",
          "options": ["scarce", "plentiful", "rare", "limited"],
          "correct": 1
        }
      ]
    },
    {
      "id": 39,
      "section": "WordMatching", 
      "type": "matching",
      "question": "Find the synonym for 'hostile':",
      "pairs": [
        {
          "target": "hostile",
          "options": ["friendly", "aggressive", "peaceful", "calm"],
          "correct": 1
        }
      ]
    },
    {
      "id": 40,
      "section": "Grammar",
      "type": "multiple_choice",
      "question": "The building __________ since 1995.",
      "options": ["has been constructed", "was constructed", "is being constructed", "had been constructed"],
      "correct": 1
    },
    {
      "id": 41,
      "section": "Cloze",
      "type": "cloze",
      "passage": "Climate change is one of the most __(41)__ challenges facing humanity today. Rising temperatures and __(42)__ weather patterns have significant impacts on ecosystems worldwide. Scientists __(43)__ that urgent action is needed to __(44)__ the worst effects. International __(45)__ is essential to address this global crisis effectively.",
      "question": "Choose the best word for blank (41):",
      "options": ["pressing", "easy", "simple", "minor"],
      "correct": 0
    },
    {
      "id": 42,
      "section": "Cloze",
      "type": "cloze",
      "question": "Choose the best word for blank (42):",
      "options": ["stable", "changing", "consistent", "regular"],
      "correct": 1
    },
    {
      "id": 43,
      "section": "Cloze",
      "type": "cloze",
      "question": "Choose the best word for blank (43):",
      "options": ["deny", "argue", "dispute", "agree"],
      "correct": 3
    },
    {
      "id": 44,
      "section": "Cloze",
      "type": "cloze",
      "question": "Choose the best word for blank (44):",
      "options": ["worsen", "prevent", "ignore", "increase"],
      "correct": 1
    },
    {
      "id": 45,
      "section": "Cloze",
      "type": "cloze",
      "question": "Choose the best word for blank (45):",
      "options": ["competition", "cooperation", "isolation", "separation"],
      "correct": 1
    },
    {
      "id": 46,
      "section": "Reading",
      "type": "multiple_choice",
      "passage": "Artificial intelligence has revolutionized numerous industries, from healthcare to transportation. Machine learning algorithms can now process vast amounts of data and make predictions with remarkable accuracy. However, ethical concerns about AI decision-making and potential job displacement continue to spark debate among experts and policymakers.",
      "question": "According to the passage, what has AI done to various industries?",
      "options": ["destroyed them", "revolutionized them", "ignored them", "simplified them"],
      "correct": 1
    },
    {
      "id": 47,
      "section": "Reading",
      "type": "multiple_choice",
      "question": "What concerns about AI are mentioned in the passage?",
      "options": ["cost and complexity", "speed and efficiency", "ethics and job displacement", "security and privacy"],
      "correct": 2
    },
    {
      "id": 48,
      "section": "Reading",
      "type": "multiple_choice",
      "passage": "The Mediterranean diet, rich in olive oil, fish, fruits, and vegetables, has been associated with numerous health benefits. Studies have shown that people who follow this diet have lower rates of heart disease, certain cancers, and cognitive decline. The diet emphasizes whole foods and minimally processed ingredients.",
      "question": "What does the Mediterranean diet emphasize?",
      "options": ["processed foods", "whole foods", "fast foods", "artificial ingredients"],
      "correct": 1
    },
    {
      "id": 49,
      "section": "Reading",
      "type": "multiple_choice",
      "question": "According to the passage, the Mediterranean diet is associated with:",
      "options": ["increased disease risk", "health benefits", "weight gain", "food allergies"],
      "correct": 1
    },
    {
      "id": 50,
      "section": "Reading",
      "type": "multiple_choice",
      "passage": "Renewable energy sources like solar and wind power are becoming increasingly cost-effective alternatives to fossil fuels. Governments worldwide are investing heavily in clean energy infrastructure to reduce carbon emissions and combat climate change. The transition to renewable energy is essential for sustainable development.",
      "question": "Why are governments investing in renewable energy?",
      "options": ["to increase profits", "to reduce carbon emissions", "to create jobs only", "to compete with other countries"],
      "correct": 1
    },
    {
      "id": 51,
      "section": "Reading",
      "type": "multiple_choice",
      "question": "What is described as essential for sustainable development?",
      "options": ["fossil fuel expansion", "renewable energy transition", "increased consumption", "industrial growth"],
      "correct": 1
    },
    {
      "id": 52,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'meticulous':",
      "pairs": [
        {
          "target": "meticulous",
          "options": ["careless", "careful", "lazy", "rushed"],
          "correct": 1
        }
      ]
    },
    {
      "id": 53,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'profound':",
      "pairs": [
        {
          "target": "profound",
          "options": ["shallow", "deep", "simple", "obvious"],
          "correct": 1
        }
      ]
    },
    {
      "id": 54,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'resilient':",
      "pairs": [
        {
          "target": "resilient",
          "options": ["weak", "strong", "fragile", "delicate"],
          "correct": 1
        }
      ]
    },
    {
      "id": 55,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'innovative':",
      "pairs": [
        {
          "target": "innovative",
          "options": ["traditional", "creative", "conventional", "old-fashioned"],
          "correct": 1
        }
      ]
    },
    {
      "id": 56,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'eloquent':",
      "pairs": [
        {
          "target": "eloquent",
          "options": ["inarticulate", "articulate", "quiet", "shy"],
          "correct": 1
        }
      ]
    },
    {
      "id": 57,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'abundant':",
      "pairs": [
        {
          "target": "abundant",
          "options": ["plentiful", "scarce", "rare", "few"],
          "correct": 0
        }
      ]
    },
    {
      "id": 58,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'hostile':",
      "pairs": [
        {
          "target": "hostile",
          "options": ["friendly", "aggressive", "peaceful", "kind"],
          "correct": 1
        }
      ]
    },
    {
      "id": 59,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'transparent':",
      "pairs": [
        {
          "target": "transparent",
          "options": ["opaque", "clear", "dark", "murky"],
          "correct": 1
        }
      ]
    },
    {
      "id": 60,
      "section": "WordMatching",
      "type": "matching",
      "question": "Find the synonym for 'ambitious':",
      "pairs": [
        {
          "target": "ambitious",
          "options": ["unmotivated", "driven", "lazy", "quiet"],
          "correct": 1
        }
      ]
    }
  ]
};

// Placement Test Class
class PlacementTest {
    constructor() {
        this.testData = placementTestData;
        this.currentQuestionIndex = 0;
        this.userAnswers = new Map();
        this.startTime = null;
        this.testTimer = null;
        this.testDuration = 60 * 60 * 1000; // 60 minutes in milliseconds
        this.timeRemaining = this.testDuration;
        
        this.setupEventListeners();
    }
    
    setupEventListeners() {
        const startBtn = document.getElementById('startPlacementTest');
        const prevBtn = document.getElementById('prevTestQuestion');
        const nextBtn = document.getElementById('nextTestQuestion');
        const finishBtn = document.getElementById('finishPlacementTest');
        const retakeBtn = document.getElementById('retakePlacementTest');
        
        if (startBtn) {
            startBtn.addEventListener('click', () => this.startTest());
        }
        
        if (prevBtn) {
            prevBtn.addEventListener('click', () => this.previousQuestion());
        }
        
        if (nextBtn) {
            nextBtn.addEventListener('click', () => this.nextQuestion());
        }
        
        if (finishBtn) {
            finishBtn.addEventListener('click', () => this.finishTest());
        }
        
        if (retakeBtn) {
            retakeBtn.addEventListener('click', () => this.resetTest());
        }
    }
    
    startTest() {
        this.startTime = Date.now();
        this.currentQuestionIndex = 0;
        this.userAnswers.clear();
        this.timeRemaining = this.testDuration;
        
        const startSection = document.querySelector('.test-start-section');
        const testContent = document.getElementById('placementTestContent');
        
        if (startSection) startSection.style.display = 'none';
        if (testContent) testContent.style.display = 'block';
        
        this.displayQuestion();
        this.startTimer();
        this.updateProgress();
        this.updateQuestionGrid();
    }
    
    displayQuestion() {
        const question = this.testData.questions[this.currentQuestionIndex];
        if (!question) return;
        
        const sectionEl = document.getElementById('currentTestSection');
        const contentEl = document.getElementById('testQuestionContent');
        const optionsEl = document.getElementById('testQuestionOptions');
        
        if (sectionEl) {
            sectionEl.textContent = `${question.section} - Soru ${this.currentQuestionIndex + 1}`;
        }
        
        if (contentEl) {
            let content = '';
            
            // Show passage for Reading and Cloze questions - Cloze uses shared passage (41-45)
            if (question.passage) {
                content += `<div class="passage-content">
                    <h4>${question.section === 'Reading' ? 'Reading Passage:' : 'Cloze Test (Sorular 41-45):'}</h4>
                    <p>${question.passage}</p>
                </div>`;
            } else if (question.section === 'Cloze' && this.currentQuestionIndex >= 40 && this.currentQuestionIndex <= 44) {
                // For Cloze questions 41-45, always show the same passage
                const clozePassage = this.getClozePassage();
                if (clozePassage) {
                    content += `<div class="passage-content">
                        <h4>Cloze Test (Sorular 41-45):</h4>
                        <p>${clozePassage}</p>
                        <div class="cloze-info" style="margin-top: 15px; padding: 10px; background: var(--bg-light); border-left: 4px solid var(--primary); border-radius: 0 8px 8px 0;">
                            <em>Yukarıdaki parçada boş bırakılan yerlere gelen en uygun seçeneği işaretleyiniz.</em>
                        </div>
                    </div>`;
                }
            }
            
            content += `<h3>${question.question}</h3>`;
            contentEl.innerHTML = content;
        }
        
        if (optionsEl) {
            let optionsHTML = '';
            
            // Handle different question types
            if (question.type === 'matching' && question.pairs) {
                // Word matching questions
                const pair = question.pairs[0]; // Currently showing one pair per question
                if (pair && pair.options) {
                    optionsHTML = `
                        <div class="word-matching">
                            <p><strong>Eşanlamlısını seçin:</strong> "${pair.target}"</p>
                            ${pair.options.map((option, index) => {
                                const isSelected = this.userAnswers.get(this.currentQuestionIndex) === index;
                                return `<button class="option-btn test-option ${isSelected ? 'selected' : ''}" 
                                               onclick="placementTest.selectAnswer(${index})"
                                               style="display: flex !important; align-items: center !important; justify-content: flex-start !important; width: 100% !important; padding: 16px 20px !important; margin: 8px 0 !important; border: 2px solid var(--border) !important; border-radius: 10px !important; background: var(--bg) !important; color: var(--text) !important; font-size: 16px !important; cursor: pointer !important; transition: all 0.3s ease !important; text-align: left !important; box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important; min-height: 60px !important; font-family: inherit !important;">
                                            ${String.fromCharCode(65 + index)}. ${option}
                                        </button>`;
                            }).join('')}
                        </div>
                    `;
                }
            } else if (question.options && Array.isArray(question.options)) {
                // Regular multiple choice questions
                if (question.options.length > 0) {
                    question.options.forEach((option, index) => {
                        const isSelected = this.userAnswers.get(this.currentQuestionIndex) === index;
                        optionsHTML += `
                            <button class="option-btn test-option ${isSelected ? 'selected' : ''}" 
                                    onclick="placementTest.selectAnswer(${index})"
                                    data-option="${index}"
                                    style="display: flex !important; align-items: center !important; justify-content: flex-start !important; width: 100% !important; padding: 16px 20px !important; margin: 8px 0 !important; border: 2px solid var(--border) !important; border-radius: 10px !important; background: var(--bg) !important; color: var(--text) !important; font-size: 16px !important; cursor: pointer !important; transition: all 0.3s ease !important; text-align: left !important; box-shadow: 0 2px 8px rgba(0,0,0,0.08) !important; min-height: 60px !important; font-family: inherit !important;">
                                ${String.fromCharCode(65 + index)}. ${option}
                            </button>
                        `;
                    });
                }
            } else {
                // Handle questions without proper options
                optionsHTML = `
                    <div class="error-message">
                        <p>Bu soru için seçenekler yüklenemedi. Lütfen sonraki soruya geçin.</p>
                    </div>
                `;
            }
            
            optionsEl.innerHTML = optionsHTML;
        }
        
        this.updateNavigation();
        this.updateProgress();
        this.updateQuestionGrid();
    }
    
    updateQuestionGrid() {
        const gridContainer = document.getElementById('questionGrid');
        if (!gridContainer) return;
        
        // Clear and reset container style
        gridContainer.innerHTML = '';
        gridContainer.style.display = 'flex';
        gridContainer.style.flexWrap = 'wrap';
        gridContainer.style.gap = '5px';
        gridContainer.style.justifyContent = 'flex-start';
        gridContainer.style.alignItems = 'flex-start';
        
        // Create exactly 60 grid items for all questions (1-60)  
        for (let i = 0; i < 60; i++) {
            const isAnswered = this.userAnswers.has(i);
            const isCurrent = i === this.currentQuestionIndex;
            
            let statusClass = 'unanswered';
            if (isCurrent) statusClass = 'current';
            else if (isAnswered) statusClass = 'answered';
            
            const gridItem = document.createElement('div');
            gridItem.className = `question-grid-item ${statusClass}`;
            gridItem.onclick = () => this.jumpToQuestion(i);
            gridItem.title = `Soru ${i + 1}`;
            gridItem.textContent = i + 1;
            
            // Set explicit styles for flexbox layout
            gridItem.style.cssText = `
                display: flex !important;
                align-items: center !important;
                justify-content: center !important;
                cursor: pointer !important;
                flex: 0 0 auto !important;
                width: 28px !important;
                height: 28px !important;
                border-radius: 50% !important;
                font-weight: 600 !important;
                font-size: 12px !important;
                transition: all 0.3s ease !important;
                border: 1px solid var(--border) !important;
                background: var(--bg) !important;
                color: var(--text) !important;
                box-shadow: 0 1px 2px rgba(0,0,0,0.05) !important;
                user-select: none !important;
                text-align: center !important;
                position: relative !important;
                margin: 0 !important;
                padding: 0 !important;
            `;
            
            gridContainer.appendChild(gridItem);
        }
        
        // Force update colors after DOM insertion
        for (let i = 0; i < 60; i++) {
            const gridItem = gridContainer.children[i];
            if (gridItem) {
                const isAnswered = this.userAnswers.has(i);
                const isCurrent = i === this.currentQuestionIndex;
                
                if (isCurrent) {
                    gridItem.style.background = '#f97316';
                    gridItem.style.color = 'white';
                    gridItem.style.border = '2px solid #ea580c';
                    gridItem.style.boxShadow = '0 0 0 2px rgba(249, 115, 22, 0.5)';
                    gridItem.style.transform = 'scale(1.05)';
                } else if (isAnswered) {
                    gridItem.style.background = '#10b981';
                    gridItem.style.color = 'white';
                    gridItem.style.border = '1px solid #10b981';
                    gridItem.style.transform = 'scale(1)';
                } else {
                    gridItem.style.background = '#f3f4f6';
                    gridItem.style.color = '#6b7280';
                    gridItem.style.border = '1px solid #d1d5db';
                    gridItem.style.transform = 'scale(1)';
                }
            }
        }
    }
    
    jumpToQuestion(questionIndex) {
        if (questionIndex >= 0 && questionIndex < 60) {
            this.currentQuestionIndex = questionIndex;
            this.displayQuestion();
        }
    }
    
    getClozePassage() {
        // Get the shared passage for Cloze questions 41-45
        const clozeQuestions = this.testData.questions.filter(q => q.section === 'Cloze');
        if (clozeQuestions.length > 0 && clozeQuestions[0].passage) {
            return clozeQuestions[0].passage;
        }
        // Fallback passage if none found
        return "The internet has revolutionized the way we communicate and access information. It has created new opportunities for business, education, and social interaction. However, it has also brought new challenges such as cybersecurity threats and information overload. (41) _____ the benefits of the internet, we must also be aware of its potential risks. (42) _____ proper education and awareness, users can navigate the digital world safely. The key is to maintain a balance between embracing technological advances (43) _____ maintaining our privacy and security. As technology continues to evolve, (44) _____ important for individuals to stay informed about digital literacy. Only through continuous learning can we (45) _____ the full potential of the internet while minimizing its risks.";
    }
    
    selectAnswer(optionIndex) {
        this.userAnswers.set(this.currentQuestionIndex, optionIndex);
        
        // Update UI - use specific selector for test question options
        const optionBtns = document.querySelectorAll('#testQuestionOptions .option-btn, #testQuestionOptions .test-option, #testQuestionOptions button');
        optionBtns.forEach((btn, index) => {
            btn.classList.toggle('selected', index === optionIndex);
            
            // Force styling with inline styles
            if (index === optionIndex) {
                btn.style.background = 'linear-gradient(135deg, var(--primary) 0%, #4f46e5 100%)';
                btn.style.color = 'white';
                btn.style.borderColor = 'var(--primary)';
                btn.style.boxShadow = '0 6px 20px rgba(59, 130, 246, 0.3)';
            } else {
                btn.style.background = 'var(--bg)';
                btn.style.color = 'var(--text)';
                btn.style.borderColor = 'var(--border)';
                btn.style.boxShadow = '0 2px 8px rgba(0,0,0,0.08)';
            }
        });
        
        this.updateNavigation();
        this.updateQuestionGrid();
    }
    
    updateNavigation() {
        const prevBtn = document.getElementById('prevTestQuestion');
        const nextBtn = document.getElementById('nextTestQuestion');
        const finishBtn = document.getElementById('finishPlacementTest');
        
        if (prevBtn) {
            prevBtn.disabled = this.currentQuestionIndex === 0;
        }
        
        const isLastQuestion = this.currentQuestionIndex === 59; // 60th question (index 59)
        const hasAnswer = this.userAnswers.has(this.currentQuestionIndex);
        
        if (nextBtn && finishBtn) {
            if (isLastQuestion) {
                nextBtn.style.display = 'none';
                finishBtn.style.display = 'inline-flex';
            } else {
                nextBtn.style.display = 'inline-flex';
                nextBtn.disabled = false; // Allow navigation without answering
                finishBtn.style.display = 'none';
            }
        }
    }
    
    updateProgress() {
        const progressFill = document.getElementById('testProgress');
        const currentQuestion = document.getElementById('currentTestQuestion');
        const totalQuestions = document.getElementById('totalTestQuestions');
        
        const progress = ((this.currentQuestionIndex + 1) / 60) * 100;
        
        if (progressFill) {
            progressFill.style.width = `${progress}%`;
        }
        
        if (currentQuestion) {
            currentQuestion.textContent = this.currentQuestionIndex + 1;
        }
        
        if (totalQuestions) {
            totalQuestions.textContent = 60;
        }
    }
    
    previousQuestion() {
        if (this.currentQuestionIndex > 0) {
            this.currentQuestionIndex--;
            this.displayQuestion();
        }
    }
    
    nextQuestion() {
        if (this.currentQuestionIndex < 59) { // 60th question (index 59)
            this.currentQuestionIndex++;
            this.displayQuestion();
        }
    }
    
    startTimer() {
        this.updateTimerDisplay();
        
        this.testTimer = setInterval(() => {
            this.timeRemaining -= 1000;
            this.updateTimerDisplay();
            
            if (this.timeRemaining <= 0) {
                this.finishTest();
            }
        }, 1000);
    }
    
    updateTimerDisplay() {
        const timerEl = document.getElementById('testTimer');
        if (!timerEl) return;
        
        const minutes = Math.floor(this.timeRemaining / 60000);
        const seconds = Math.floor((this.timeRemaining % 60000) / 1000);
        
        timerEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        
        // Change color when time is running low
        if (this.timeRemaining < 10 * 60 * 1000) { // Last 10 minutes
            timerEl.style.color = '#dc2626';
        }
    }
    
    finishTest() {
        // Confirm if user wants to finish with unanswered questions
        const totalQuestions = 60;
        const answeredQuestions = this.userAnswers.size;
        const unansweredCount = totalQuestions - answeredQuestions;
        
        if (unansweredCount > 0 && this.testTimer) { // Only ask if test wasn't auto-finished by timer
            const confirmFinish = confirm(`${unansweredCount} soru cevaplanmamış. Testi bitirmek istediğinizden emin misiniz?`);
            if (!confirmFinish) {
                return;
            }
        }
        
        if (this.testTimer) {
            clearInterval(this.testTimer);
            this.testTimer = null;
        }
        
        const endTime = Date.now();
        const totalTime = endTime - this.startTime;
        
        const results = this.calculateResults(totalTime);
        this.displayResults(results);
    }
    
    calculateResults(totalTime) {
        let correctAnswers = 0;
        const sectionResults = {};
        
        // Initialize section results
        for (const section of Object.keys(this.testData.structure.sections)) {
            sectionResults[section] = { correct: 0, total: 0 };
        }
        
        // Calculate scores
        this.testData.questions.forEach((question, index) => {
            const userAnswer = this.userAnswers.get(index);
            let isCorrect = false;
            
            // Handle different question types
            if (question.type === 'matching' && question.pairs) {
                const pair = question.pairs[0];
                isCorrect = userAnswer === pair.correct;
            } else {
                isCorrect = userAnswer === question.correct;
            }
            
            if (isCorrect) {
                correctAnswers++;
            }
            
            sectionResults[question.section].total++;
            if (isCorrect) {
                sectionResults[question.section].correct++;
            }
        });
        
        // Determine CEFR level (criteria kept hidden for surprise factor)
        let level = 'A1';
        if (correctAnswers >= 55) level = 'C2';
        else if (correctAnswers >= 46) level = 'C1';
        else if (correctAnswers >= 36) level = 'B2';
        else if (correctAnswers >= 26) level = 'B1';
        else if (correctAnswers >= 16) level = 'A2';
        
        const percentage = Math.round((correctAnswers / this.testData.questions.length) * 100);
        
        return {
            score: correctAnswers,
            totalQuestions: this.testData.questions.length,
            percentage,
            level,
            sectionResults,
            totalTime,
            answeredQuestions: this.userAnswers.size
        };
    }
    
    displayResults(results) {
        const testContent = document.getElementById('placementTestContent');
        const resultsSection = document.getElementById('placementResults');
        
        if (testContent) testContent.style.display = 'none';
        if (resultsSection) resultsSection.style.display = 'block';
        
        // Update level badge
        const levelBadge = document.getElementById('levelBadge');
        if (levelBadge) {
            levelBadge.textContent = `${results.level} Seviyesi`;
            levelBadge.className = `level-badge level-${results.level}`;
        }
        
        // Update summary
        const scoreEl = document.getElementById('testScore');
        const percentageEl = document.getElementById('testPercentage');
        const durationEl = document.getElementById('testDuration');
        const cefrEl = document.getElementById('cefr-level');
        
        if (scoreEl) scoreEl.textContent = `${results.score}/${results.totalQuestions}`;
        if (percentageEl) percentageEl.textContent = `${results.percentage}%`;
        if (cefrEl) cefrEl.textContent = results.level;
        
        if (durationEl) {
            const minutes = Math.floor(results.totalTime / 60000);
            const seconds = Math.floor((results.totalTime % 60000) / 1000);
            durationEl.textContent = `${minutes}:${seconds.toString().padStart(2, '0')}`;
        }
        
        // Update section results
        this.displaySectionResults(results.sectionResults);
        
        // Update level description and recommendations
        this.displayLevelDescription(results.level);
        this.displayStudyRecommendations(results.level, results.sectionResults);
    }
    
    displaySectionResults(sectionResults) {
        const container = document.getElementById('sectionResults');
        if (!container) return;
        
        let html = '<h3>Bölüm Bazında Sonuçlar</h3><div class="section-results">';
        
        for (const [section, result] of Object.entries(sectionResults)) {
            const percentage = Math.round((result.correct / result.total) * 100);
            html += `
                <div class="section-result">
                    <div class="section-name">${section}</div>
                    <div class="section-score">${result.correct}/${result.total}</div>
                    <div class="section-percentage">${percentage}%</div>
                </div>
            `;
        }
        
        html += '</div>';
        container.innerHTML = html;
    }
    
    displayLevelDescription(level) {
        const container = document.getElementById('levelDescription');
        if (!container) return;
        
        const descriptions = {
            'A1': {
                title: 'A1 - Başlangıç Seviyesi',
                description: 'Günlük hayatta kullanılan temel kelimeleri ve ifadeleri anlayabilirsiniz. Basit sorular sorabilir ve cevaplayabilirsiniz.'
            },
            'A2': {
                title: 'A2 - Temel Seviye',
                description: 'Sık kullanılan kelimeler ve ifadeleri anlayabilirsiniz. Basit ve rutin görevlerde iletişim kurabilirsiniz.'
            },
            'B1': {
                title: 'B1 - Orta-Alt Seviye', 
                description: 'İş, okul ve eğlence alanlarında karşılaştığınız konuları anlayabilirsiniz. Seyahat ettiğiniz yerlerde çoğu durumla başa çıkabilirsiniz.'
            },
            'B2': {
                title: 'B2 - Orta-Üst Seviye',
                description: 'Karmaşık metinlerin ana fikirlerini anlayabilirsiniz. Ana dilinizi konuşanlarla doğal ve akıcı bir şekilde iletişim kurabilirsiniz.'
            },
            'C1': {
                title: 'C1 - İleri Seviye',
                description: 'Uzun ve zorlu metinleri anlayabilir, ima edilen anlamları kavrayabilirsiniz. Akademik ve profesyonel amaçlar için dili etkili kullanabilirsiniz.'
            },
            'C2': {
                title: 'C2 - Uzman Seviye',
                description: 'Duyduğunuz ve okuduğunuz hemen hemen her şeyi kolaylıkla anlayabilirsiniz. Ana dili konuşur gibi akıcı ve hassas bir şekilde kendinizi ifade edebilirsiniz.'
            }
        };
        
        const desc = descriptions[level];
        container.innerHTML = `
            <h3>${desc.title}</h3>
            <p>${desc.description}</p>
        `;
    }
    
    displayStudyRecommendations(level, sectionResults) {
        const container = document.getElementById('studyRecommendations');
        if (!container) return;
        
        let recommendations = [];
        
        // General recommendations based on level
        const levelRecommendations = {
            'A1': [
                'Temel kelime hazinesi çalışması yapın',
                'Basit günlük diyalogları dinleyin',
                'Present tense ve past tense üzerinde çalışın',
                'Günlük yaşam konularında okuma yapın'
            ],
            'A2': [
                'Daha fazla kelime öğrenin ve tekrar yapın',
                'Basit hikayeler okuyun',
                'Future tense ve modal verbs çalışın',
                'Günlük konuşma pratiği yapın'
            ],
            'B1': [
                'Orta seviye kelime hazinesi geliştirin',
                'Haber makaleleri okuyun',
                'Conditional sentences ve passive voice çalışın',
                'Tartışma ve görüş bildirme pratiği yapın'
            ],
            'B2': [
                'İleri seviye kelime ve deyimleri öğrenin',
                'Akademik metinler okuyun',
                'Complex sentence structures çalışın',
                'Formal writing pratiği yapın'
            ],
            'C1': [
                'Specialized vocabulary geliştirin',
                'Academic papers ve literatür okuyun',
                'Advanced grammar structures çalışın',
                'Professional communication skills geliştirin'
            ],
            'C2': [
                'Native-level expressions öğrenin',
                'Literary works okuyun',
                'Cultural nuances ve idioms çalışın',
                'Leadership communication çalışın'
            ]
        };
        
        recommendations = levelRecommendations[level] || [];
        
        // Add section-specific recommendations
        for (const [section, result] of Object.entries(sectionResults)) {
            const percentage = (result.correct / result.total) * 100;
            if (percentage < 60) {
                switch(section) {
                    case 'Grammar':
                        recommendations.push(`Grammar çalışması: ${section} bölümünde ${percentage.toFixed(0)}% başarı`);
                        break;
                    case 'Vocabulary':
                        recommendations.push(`Kelime çalışması: ${section} bölümünde ${percentage.toFixed(0)}% başarı`);
                        break;
                    case 'Reading':
                        recommendations.push(`Okuma pratiği: ${section} bölümünde ${percentage.toFixed(0)}% başarı`);
                        break;
                    case 'Cloze':
                        recommendations.push(`Cloze test pratiği: ${section} bölümünde ${percentage.toFixed(0)}% başarı`);
                        break;
                    case 'WordMatching':
                        recommendations.push(`Kelime eşleştirme: ${section} bölümünde ${percentage.toFixed(0)}% başarı`);
                        break;
                }
            }
        }
        
        let html = '<h3>Çalışma Önerileri</h3><ul>';
        recommendations.forEach(rec => {
            html += `<li>${rec}</li>`;
        });
        html += '</ul>';
        
        container.innerHTML = html;
    }
    
    resetTest() {
        this.currentQuestionIndex = 0;
        this.userAnswers.clear();
        this.startTime = null;
        this.timeRemaining = this.testDuration;
        
        if (this.testTimer) {
            clearInterval(this.testTimer);
            this.testTimer = null;
        }
        
        const startSection = document.querySelector('.test-start-section');
        const testContent = document.getElementById('placementTestContent');
        const resultsSection = document.getElementById('placementResults');
        
        if (startSection) startSection.style.display = 'block';
        if (testContent) testContent.style.display = 'none';
        if (resultsSection) resultsSection.style.display = 'none';
    }
}

// Initialize placement test
let placementTest;

document.addEventListener('DOMContentLoaded', () => {
    window.app = new QuizApp();
    
    // Initialize placement test
    placementTest = new PlacementTest();
    
    // Initialize new features
    setupNavigation();
    setupHeroButtons();
    setupPromptReset();
    setupPromptGenerator();
    setupFlashcards();
});
    </script>
    <!-- Footer -->
    <footer class="site-footer">
        <div class="footer-container">
            <div class="footer-grid">
                <div class="footer-section">
                    <h4 class="footer-title">AI Destekli Quiz</h4>
                    <p class="footer-description">ChatGPT ile güçlendirilmiş quiz ve flashcard sistemi. İngilizce öğrenmenin en akıllı yolu.</p>
                    <div class="footer-social">
                        <a href="mailto:okanyaldiz@icloud.com" class="footer-link" title="İletişim">
                            <span class="link-icon">📧</span>
                            <span>İletişim</span>
                        </a>
                        <a href="https://linkedin.com/in/okanyaldiz" target="_blank" class="footer-link" title="LinkedIn Profili">
                            <span class="link-icon">💼</span>
                            <span>LinkedIn</span>
                        </a>
                        <a href="https://github.com/okanveritas" target="_blank" class="footer-link" title="GitHub Profili">
                            <span class="link-icon">⚡</span>
                            <span>GitHub</span>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Platform Özellikleri</h4>
                    <ul class="footer-features">
                        <li><span class="feature-icon">🤖</span> AI Destekli Quiz Sistemi</li>
                        <li><span class="feature-icon">📚</span> İnteraktif Flashcard'lar</li>
                        <li><span class="feature-icon">🎯</span> CEFR Seviye Testi</li>
                        <li><span class="feature-icon">📊</span> Detaylı Sonuç Analizi</li>
                        <li><span class="feature-icon">🌙</span> Dark/Light Tema</li>
                    </ul>
                </div>
                
                <div class="footer-section">
                    <h4 class="footer-subtitle">Hızlı Erişim</h4>
                    <div class="footer-nav">
                        <a href="#" class="footer-nav-link">
                            <span class="nav-icon">🏠</span> Ana Sayfa
                        </a>
                        <a href="#" class="footer-nav-link">
                            <span class="nav-icon">📝</span> Quiz Oluştur
                        </a>
                        <a href="#" class="footer-nav-link">
                            <span class="nav-icon">🎯</span> Seviye Testi
                        </a>
                        <a href="#" class="footer-nav-link">
                            <span class="nav-icon">ℹ️</span> Hakkımızda
                        </a>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div class="footer-copyright">
                    © 2025 AI Destekli Quiz. Tüm hakları saklıdır.
                </div>
                <div class="footer-badges">
                    <span class="footer-badge">✓ Ücretsiz</span>
                    <span class="footer-badge">✓ Açık Kaynak</span>
                    <span class="footer-badge">✓ Reklamsız</span>
                </div>
            </div>
        </div>
    </footer>

</body>
</html>